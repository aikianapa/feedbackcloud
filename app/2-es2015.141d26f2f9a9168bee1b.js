(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"2yxt":function(t,e,i){"use strict";i.r(e),i.d(e,"ChatModule",(function(){return Ct}));var n=i("ofXK"),r=i("sbs8"),s=i("tyNb"),o=i("mrSG"),a=i("jCJ1"),c=i("fXoL"),l=i("DQTw"),h=i("3Pt+"),b=i("kRZC");let p=(()=>{class t{constructor(t,e,i){this.fb=t,this.api=e,this.chats=i,this.change=new c.n,this.notify=!1}get first_name(){return localStorage.getItem("user_first_name")||"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c"}get last_name(){return localStorage.getItem("user_last_name")||""}get avatar(){return[{img:localStorage.getItem("user_avatar")||"assets/img/chat-avatar.svg",active:"on"}]}get _id(){return localStorage.getItem("user_id")||localStorage.getItem("_id")||""}register(){return Object(o.a)(this,void 0,void 0,(function*(){return this._id}))}updateUserId(){console.log("Save new user ID: "+this.chats.user_id),localStorage.setItem("user_id",this.chats.user_id)}user(){return{_id:this._id,active:"on",role:"user",first_name:this.first_name,last_name:this.last_name,avatar:this.avatar}}form(){return this.fb.group({first_name:[this.first_name],last_name:[this.last_name],avatar:[this.avatar[0].img],notify:[this.notify]})}save(t){return Object(o.a)(this,void 0,void 0,(function*(){let e=this.form();e.patchValue(t);for(let i in e.value)localStorage.setItem("user_"+i,t[i]);this.chats.updateProfile(this.user()),this.change.emit(this.user())}))}save_id(t){localStorage.setItem("user_id",t)}}return t.\u0275fac=function(e){return new(e||t)(c.bc(h.f),c.bc(b.a),c.bc(l.a))},t.\u0275prov=c.Jb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var d=i("1kSV");const u=["startRating"],f=["chatContent"],g=["thankyou"];function m(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",24),c.Tb(1,"chat-content-header",25),c.fc("profile",(function(){return c.Bc(t),c.jc().toggleProfile(!0)}))("places",(function(e){return c.Bc(t),c.jc().togglePlaces(e)})),c.Sb(),c.Ob(2,"chat-content",26,27),c.Tb(4,"chat-content-sidebar",28),c.fc("close",(function(){return c.Bc(t),c.jc().toggleProfile(!1)})),c.Sb(),c.Sb()}}function v(t,e){1&t&&(c.Tb(0,"div",29),c.Tb(1,"a",30),c.Tb(2,"h6"),c.Lc(3,"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d\u043e \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0447\u0430\u0442\u0430"),c.Sb(),c.Tb(4,"div",31),c.Tb(5,"div",32),c.Tb(6,"p"),c.Lc(7,"\u0414\u043b\u044f \u0441\u043e\u0437\u0434\u0430\u043d\u0438\u044f \u043d\u043e\u0432\u043e\u0433\u043e \u0447\u0430\u0442\u0430 \u043e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u0443\u0439\u0442\u0435"),c.Sb(),c.Tb(8,"p",33),c.Ob(9,"i",34),c.Sb(),c.Tb(10,"span",35),c.Lc(11,"QR \u043a\u043e\u0434"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb())}function w(t,e){if(1&t&&(c.Tb(0,"h4",62),c.Lc(1),c.Sb()),2&t){const t=c.jc(2);c.zb(1),c.Mc(t.chat.activePlace.name)}}function S(t,e){if(1&t&&(c.Tb(0,"p"),c.Lc(1),c.Sb()),2&t){const t=c.jc(2);c.zb(1),c.Mc(t.chat.activePlace.text)}}function y(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u041e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e"),c.Qb())}function T(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u041f\u043b\u043e\u0445\u043e"),c.Qb())}function _(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u0421\u0440\u0435\u0434\u043d\u0435"),c.Qb())}function k(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u0425\u043e\u0440\u043e\u0448\u043e"),c.Qb())}function x(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u041e\u0442\u043b\u0438\u0447\u043d\u043e"),c.Qb())}function O(t,e){if(1&t&&(c.Tb(0,"div",63),c.Tb(1,"p",64),c.Ob(2,"i",65),c.Sb(),c.Tb(3,"span",66),c.Jc(4,y,2,0,"ng-container",67),c.Jc(5,T,2,0,"ng-container",67),c.Jc(6,_,2,0,"ng-container",67),c.Jc(7,k,2,0,"ng-container",67),c.Jc(8,x,2,0,"ng-container",67),c.Sb(),c.Sb()),2&t){const t=e.fill,i=e.index;c.zb(1),c.Eb("filled",100===t)("bad",i<3),c.zb(2),c.pc("ngSwitch",i),c.zb(1),c.pc("ngSwitchCase",0),c.zb(1),c.pc("ngSwitchCase",1),c.zb(1),c.pc("ngSwitchCase",2),c.zb(1),c.pc("ngSwitchCase",3),c.zb(1),c.pc("ngSwitchCase",4)}}function R(t,e){if(1&t&&(c.Tb(0,"div",36),c.Jc(1,w,2,1,"h4",37),c.Tb(2,"button",38),c.fc("click",(function(){return e.$implicit.dismiss("Cross click")})),c.Tb(3,"span",39),c.Lc(4,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(5,"div",40),c.Jc(6,S,2,1,"p",41),c.Tb(7,"h6",42),c.Lc(8,"\u0417\u0434\u0435\u0441\u044c \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0446\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u0432\u0435\u0434\u0435\u043d\u0438\u0435"),c.Sb(),c.Tb(9,"div",43),c.Tb(10,"ngb-rating",44),c.Jc(11,O,9,10,"ng-template"),c.Sb(),c.Sb(),c.Tb(12,"h6",45),c.Lc(13,"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0439 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),c.Sb(),c.Tb(14,"div",46),c.Ob(15,"input",47),c.Sb(),c.Tb(16,"div",48),c.Tb(17,"div",49),c.Tb(18,"div",50),c.Tb(19,"a",51),c.fc("click",(function(){return e.$implicit.close("image")})),c.Tb(20,"h6",52),c.Lc(21,"\u041f\u0440\u0438\u043b\u043e\u0436\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443"),c.Sb(),c.Ob(22,"i-feather",53),c.Sb(),c.Sb(),c.Sb(),c.Tb(23,"div",49),c.Tb(24,"div",50),c.Tb(25,"a",54),c.fc("click",(function(){return e.$implicit.close("photo")})),c.Tb(26,"h6",52),c.Lc(27,"\u0418\u043b\u0438 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e"),c.Sb(),c.Ob(28,"i-feather",55),c.Sb(),c.Sb(),c.Sb(),c.Tb(29,"div",56),c.Tb(30,"div",50),c.Tb(31,"a",57),c.fc("click",(function(){return e.$implicit.close("chat")})),c.Tb(32,"h6",52),c.Lc(33,"\u0418\u043b\u0438 \u0441\u0440\u0430\u0437\u0443 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0447\u0430\u0442\n"),c.Sb(),c.Ob(34,"i-feather",58),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Tb(35,"div",59),c.Tb(36,"button",60),c.fc("click",(function(){return e.$implicit.close("send")})),c.Lc(37," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "),c.Ob(38,"i",61),c.Sb(),c.Sb()),2&t){const t=c.jc();c.zb(1),c.pc("ngIf",t.chat.activePlace),c.zb(4),c.pc("formGroup",t.rating),c.zb(1),c.pc("ngIf",t.chat.activePlace)}}function E(t,e){if(1&t&&(c.Tb(0,"h4",62),c.Lc(1),c.Sb()),2&t){const t=c.jc(2);c.zb(1),c.Mc(t.chat.activePlace.name)}}function L(t,e){1&t&&(c.Tb(0,"div"),c.Tb(1,"h5",71),c.Lc(2," \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0432\u0430\u0448\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435! "),c.Sb(),c.Tb(3,"p"),c.Lc(4," \u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0447\u0430\u0442, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u0441\u0443\u0434\u0438\u0442\u044c \u0441 \u043d\u0430\u0448\u0438\u043c \u0441\u043e\u0442\u0440\u0443\u0434\u0438\u043a\u043e\u043c \u0447\u0442\u043e \u043c\u044b \u043c\u043e\u0436\u0435\u043c \u0441\u0434\u0435\u043b\u0430\u0442\u044c, \u0447\u0442\u043e\u0431\u044b \u0438\u0441\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u044e "),c.Sb(),c.Sb())}function I(t,e){1&t&&(c.Tb(0,"div"),c.Tb(1,"h5",71),c.Lc(2," \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0441\u0442\u043e\u043b\u044c \u0432\u044b\u0441\u043e\u043a\u0443\u044e \u043e\u0446\u0435\u043d\u043a\u0443! "),c.Sb(),c.Tb(3,"p"),c.Lc(4," \u0415\u0441\u043b\u0438 \u043c\u044b \u0447\u0442\u043e \u043d\u0438\u0431\u0443\u0434\u044c\u0435 \u0435\u0449\u0435 \u043c\u043e\u0436\u0435\u043c \u0441\u0434\u0435\u043b\u0430\u0442\u044c \u0434\u043b\u044f \u0432\u0430\u0441 - \u043f\u0440\u043e\u0441\u0442\u043e \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0432 \u0447\u0430\u0442\u0435, \u043d\u0430\u0448\u0438 \u0441\u043e\u0442\u0440\u0443\u0434\u043d\u0438\u043a\u0438 \u0441 \u0440\u0430\u0434\u043e\u0441\u0442\u044c\u044e \u043f\u043e\u043c\u043e\u0433\u0443\u0442 \u0432\u0430\u043c "),c.Sb(),c.Sb())}function C(t,e){1&t&&(c.Tb(0,"div"),c.Tb(1,"h5",71),c.Lc(2," \u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u0441\u0442\u043e\u043b\u044c \u0432\u044b\u0441\u043e\u043a\u0443\u044e \u043e\u0446\u0435\u043d\u043a\u0443! "),c.Sb(),c.Tb(3,"p"),c.Lc(4," \u041c\u043e\u0436\u0435\u0442\u0435 \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0447\u0430\u0442, \u0447\u0442\u043e\u0431\u044b \u043e\u0431\u0441\u0443\u0434\u0438\u0442\u044c \u0432\u0430\u0448\u0435 \u043e\u0431\u0440\u0430\u0449\u0435\u043d\u0438\u0435 "),c.Sb(),c.Sb())}function A(t,e){if(1&t&&(c.Rb(0,72),c.Jc(1,I,5,0,"div",67),c.Jc(2,C,5,0,"div",73),c.Qb()),2&t){const t=c.jc(2);c.pc("ngSwitch",t.creation_mode),c.zb(1),c.pc("ngSwitchCase","rate")}}function D(t,e){if(1&t&&(c.Tb(0,"div",36),c.Jc(1,E,2,1,"h4",37),c.Tb(2,"button",38),c.fc("click",(function(){return e.$implicit.dismiss("Cross click")})),c.Tb(3,"span",39),c.Lc(4,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(5,"div",68),c.Jc(6,L,5,0,"div",69),c.Jc(7,A,3,2,"ng-template",null,70,c.Kc),c.Sb(),c.Tb(9,"div",59),c.Tb(10,"button",60),c.fc("click",(function(){return e.$implicit.close("Save click")})),c.Lc(11," \u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0447\u0430\u0442 "),c.Ob(12,"i",61),c.Sb(),c.Sb()),2&t){const t=c.yc(8),e=c.jc();c.zb(1),c.pc("ngIf",e.chat.activePlace),c.zb(5),c.pc("ngIf",e.rating.value.initial_rating<4)("ngIfElse",t)}}let P=(()=>{class t{constructor(t,e,i,n,r,s){this.chat=t,this.user=e,this.route=i,this.modalService=n,this.fb=r,this.injector=s,this.showSidebarRight=!1,this.hidePlaces=!0,this.compacted=!1}get chatMenuToggled(){return this.hidePlaces}ngOnInit(){console.log("Chat component"),this.user.register().then(t=>Object(o.a)(this,void 0,void 0,(function*(){this.route$=this.route.params.subscribe({next:t=>{"chats"!=t.place_id?this.query_room(t.place_id,this.route.snapshot.queryParams):this.hidePlaces=!1}}),this.query$=this.route.queryParams.subscribe({next:t=>{this.hidePlaces=this.compacted||this.hidePlaces,t.place?this.query_room(t.place):t.chat&&this.chat.activateChat({_id:t.chat})}})})))}ngAfterViewInit(){setTimeout(()=>this.mediaMatch())}ngOnDestroy(){this.route$&&this.route$.unsubscribe(),this.query$&&this.query$.unsubscribe()}mediaMatch(){this.compacted=window.matchMedia("(max-width: 990px)").matches}onResize(t){this.mediaMatch()}query_room(t,e){return Object(o.a)(this,void 0,void 0,(function*(){this.chat.queryUser(this.user._id,"user",t).then(()=>Object(o.a)(this,void 0,void 0,(function*(){yield this.chat.waitHello(),this.user.save_id(this.chat.user_id),this.chat.place(t)?(this.chat.selectPlace(this.chat.place(t)),this.chat.activeChat||(yield this.createFakeChat(t,e))):yield this.createFakeChat(t,e)}))).catch(t=>{console.log("Place not found!")})}))}createFakeChat(t,e){return Object(o.a)(this,void 0,void 0,(function*(){this.rating=this.fb.group({initial_rating:[4],message:[]});let i=this.injector.get(a.b);return this.modalService.open(this.startRating,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>{switch(this.chat.activeChat.initial_rating=this.rating.value.initial_rating,this.creation_mode=t,t){case"photo":return this.chatContent.takeImageDialog();case"image":return this.chatContent.openImageDialog();case"send":if(!this.rating.value.message)return this.creation_mode="rate";this.chat.sendMessage(this.rating.value.message)}return t},()=>(console.log("Cancel clicked"),"chat")).then(t=>{if("chat"!==t){if("rate"===t){let t=i.execute("creat_chat").subscribe(i=>{this.chat.sendRating(this.rating.value.initial_rating,this.user.user(),e,i),t.unsubscribe()})}return this.modalService.open(this.thankyou,{ariaLabelledBy:"modal-basic-title"})}}),this.chat.createFakeChat(t,e)}))}toggleProfile(t){this.hidePlaces=this.compacted||this.hidePlaces,this.showSidebarRight=void 0===t?!this.showSidebarRight:t}togglePlaces(t){this.hidePlaces=!!t&&!this.hidePlaces}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(l.a),c.Nb(p),c.Nb(s.a),c.Nb(d.q),c.Nb(h.f),c.Nb(c.r))},t.\u0275cmp=c.Hb({type:t,selectors:[["app-chat"]],viewQuery:function(t,e){var i;1&t&&(c.Pc(u,!0),c.Pc(f,!0),c.Pc(g,!0)),2&t&&(c.xc(i=c.gc())&&(e.startRating=i.first),c.xc(i=c.gc())&&(e.chatContent=i.first),c.xc(i=c.gc())&&(e.thankyou=i.first))},hostVars:2,hostBindings:function(t,e){1&t&&c.fc("resize",(function(t){return e.onResize(t)}),!1,c.Ac),2&t&&c.Eb("chatMenuToggled",e.chatMenuToggled)},decls:30,vars:9,consts:[["role","user",1,"app-chat","chat-app-custom"],[1,"aside","aside-fixed","cabinet-main-menu"],[1,"aside-header",3,"resize"],[1,"aside-logo"],["href","javascript:void(0)",1,"aside-menu-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-menu"],["x1","3","y1","12","x2","21","y2","12"],["x1","3","y1","6","x2","21","y2","6"],["x1","3","y1","18","x2","21","y2","18"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none","stroke","currentColor","stroke-width","2","stroke-linecap","round","stroke-linejoin","round",1,"feather","feather-x"],["x1","18","y1","6","x2","6","y2","18"],["x1","6","y1","6","x2","18","y2","18"],[1,"chat-aside-body"],[1,"ps"],[3,"user","profile"],[1,"backdrop",3,"click"],[1,"content","ht-100v","pd-0"],["id","content",1,"content-body"],[1,"pd-x-0"],[1,"chat-wrapper","chat-wrapper-two"],["class","",4,"ngIf","ngIfElse"],["no_active_chat",""],["startRating",""],["thankyou",""],[1,""],[3,"profile","places"],["right","text"],["chatContent",""],[3,"close"],[1,"no-chat-qr-scan-link"],["routerLink","/qrscanner"],[1,"card","mt-4"],[1,"card-body"],[1,"my-4"],[1,"fa","fa-qrcode","qr-icon-font-size"],["routerLink","/qrscanner",1,"btn","btn-sm","btn-success"],[1,"modal-header"],["class","modal-title",4,"ngIf"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"formGroup"],[4,"ngIf"],[1,"text-center"],[1,"d-flex","justify-content-center","my-4"],["formControlName","initial_rating","max","5",1,"chat-rating-block"],[1,"text-center","mb-3","mt-5"],[1,"rating-comment"],["formControlName","message","type","text","placeholder","\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"],[1,"row","mt-5","mb-3","mx-0"],[1,"col-12","col-md-4","rating-modal-img-container","mb-3","mb-md-0"],[1,"card"],["ngbTooltip","\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",1,"card-body","px-0","cursor-pointer",3,"click"],[1,"font-13"],["name","image",1,"featherIcon"],["ngbTooltip","\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e",1,"card-body","px-0","cursor-pointer",3,"click"],["name","camera",1,"featherIcon"],[1,"col-12","col-md-4","rating-modal-img-container"],["ngbTooltip","\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u0447\u0430\u0442",1,"card-body","px-0","cursor-pointer",3,"click"],["name","message-square",1,"featherIcon"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-arrow-right","pl-2"],[1,"modal-title"],[1,"d-flex","flex-column","align-items-center","custom-star-container"],[1,"star","custom-star"],[1,"fa","fa-star"],[1,"custom-star-text","pt-1",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"modal-body"],[4,"ngIf","ngIfElse"],["high_rating",""],[1,"text-center","mt-2","mb-4"],[3,"ngSwitch"],[4,"ngSwitchDefault"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.fc("resize",(function(t){return e.onResize(t)}),!1,c.Ac),c.Tb(3,"a",3),c.Lc(4,"Feedback"),c.Tb(5,"span"),c.Lc(6,"Cloud"),c.Sb(),c.Sb(),c.Tb(7,"a",4),c.fc("click",(function(){return e.togglePlaces(!0)})),c.ic(),c.Tb(8,"svg",5),c.Ob(9,"line",6),c.Ob(10,"line",7),c.Ob(11,"line",8),c.Sb(),c.Tb(12,"svg",9),c.Ob(13,"line",10),c.Ob(14,"line",11),c.Sb(),c.Sb(),c.Sb(),c.hc(),c.Tb(15,"div",12),c.Ob(16,"chat-select-room",13),c.Tb(17,"chat-sidebar-footer",14),c.fc("profile",(function(){return e.toggleProfile(!0)})),c.Sb(),c.Tb(18,"div",15),c.fc("click",(function(){return e.togglePlaces(!0)})),c.Sb(),c.Sb(),c.Sb(),c.Tb(19,"div",16),c.Tb(20,"div",17),c.Tb(21,"div",18),c.Tb(22,"div",19),c.Jc(23,m,5,0,"div",20),c.Jc(24,v,12,0,"ng-template",null,21,c.Kc),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Jc(26,R,39,3,"ng-template",null,22,c.Kc),c.Jc(28,D,13,3,"ng-template",null,23,c.Kc)),2&t){const t=c.yc(25);c.Eb("chat-content-show",e.hidePlaces)("show-sidebar-right",e.showSidebarRight),c.zb(17),c.pc("user",e.user),c.zb(1),c.Eb("show",e.compacted&&!e.hidePlaces),c.zb(5),c.pc("ngIf",e.chat.activeChat)("ngIfElse",t)}},styles:[""]}),t})();const Y=[{path:"",component:P},{path:"chat",component:P}];let X=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[s.f.forChild(Y)],s.f]}),t})();var M=i("hQyN"),z=i("CWLH"),j=i("K7yv"),W=i("8mtn"),H=i("tmjD"),N=i("oEUg");const V=["closeDlg"];function B(t,e){if(1&t&&(c.Rb(0),c.Lc(1),c.Qb()),2&t){const t=c.jc();c.zb(1),c.Nc(" ",t.chat.activePlace.name," ")}}function F(t,e){if(1&t&&(c.Tb(0,"div",16),c.Tb(1,"div",7),c.Tb(2,"div",17),c.Ob(3,"img",18),c.Sb(),c.Tb(4,"h6",10),c.Lc(5),c.kc(6,"username"),c.Sb(),c.Sb(),c.Sb()),2&t){const t=c.jc();c.zb(2),c.Eb("avatar-online","online"==t.chat.activeReply.status)("avatar-offline","offline"==t.chat.activeReply.status),c.zb(1),c.pc("src",t.chat.avatar(t.chat.activeReply.avatar),c.Dc),c.zb(2),c.Mc(c.lc(6,6,t.chat.activeReply))}}function J(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u041e\u0447\u0435\u043d\u044c \u043f\u043b\u043e\u0445\u043e"),c.Qb())}function Q(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u041f\u043b\u043e\u0445\u043e"),c.Qb())}function U(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u0421\u0440\u0435\u0434\u043d\u0435"),c.Qb())}function q(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u0425\u043e\u0440\u043e\u0448\u043e"),c.Qb())}function G(t,e){1&t&&(c.Rb(0),c.Lc(1,"\u041e\u0442\u043b\u0438\u0447\u043d\u043e"),c.Qb())}function K(t,e){if(1&t&&(c.Tb(0,"div",34),c.Tb(1,"p",35),c.Ob(2,"i",36),c.Sb(),c.Tb(3,"span",37),c.Jc(4,J,2,0,"ng-container",38),c.Jc(5,Q,2,0,"ng-container",38),c.Jc(6,U,2,0,"ng-container",38),c.Jc(7,q,2,0,"ng-container",38),c.Jc(8,G,2,0,"ng-container",38),c.Sb(),c.Sb()),2&t){const t=e.fill,i=e.index;c.zb(1),c.Eb("filled",100===t)("bad",i<3),c.zb(2),c.pc("ngSwitch",i),c.zb(1),c.pc("ngSwitchCase",0),c.zb(1),c.pc("ngSwitchCase",1),c.zb(1),c.pc("ngSwitchCase",2),c.zb(1),c.pc("ngSwitchCase",3),c.zb(1),c.pc("ngSwitchCase",4)}}function $(t,e){1&t&&(c.Tb(0,"div",48),c.Tb(1,"small",49),c.Lc(2," \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, \u0432 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u043d\u043e\u043c \u043d\u043e\u043c\u0435\u0440\u0435 \u043e\u0448\u0438\u0431\u043a\u0430 "),c.Sb(),c.Sb())}function Z(t,e){1&t&&(c.Tb(0,"div",48),c.Tb(1,"small",49),c.Lc(2," \u0412\u043e\u0437\u043c\u043e\u0436\u043d\u043e, email \u0432\u0432\u0435\u0434\u0451\u043d \u0441 \u043e\u0448\u0438\u0431\u043a\u043e\u0439 "),c.Sb(),c.Sb())}function tt(t,e){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"p"),c.Lc(2,"\u0412\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0434\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u043c\u044b \u043c\u043e\u0433\u043b\u0438 \u0440\u0430\u0437\u043e\u0431\u0440\u0430\u0442\u044c\u0441\u044f \u0432 \u0441\u043b\u043e\u0436\u0438\u0432\u0448\u0435\u0439\u0441\u044f \u0441\u0438\u0442\u0443\u0430\u0446\u0438\u0438"),c.Sb(),c.Tb(3,"div",39),c.Tb(4,"div",40),c.Tb(5,"label",41),c.Lc(6,"\u0418\u043c\u044f"),c.Sb(),c.Ob(7,"input",42),c.Sb(),c.Tb(8,"div",40),c.Tb(9,"label",41),c.Lc(10,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),c.Sb(),c.Ob(11,"input",43),c.Sb(),c.Tb(12,"div",44),c.Tb(13,"label",41),c.Lc(14,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),c.Sb(),c.Ob(15,"input",45),c.Jc(16,$,3,0,"div",46),c.Sb(),c.Tb(17,"div",44),c.Tb(18,"label",41),c.Lc(19,"\u042d\u043b.\u043f\u043e\u0447\u0442\u0430"),c.Sb(),c.Ob(20,"input",47),c.Jc(21,Z,3,0,"div",46),c.Sb(),c.Sb(),c.Sb()),2&t){const t=c.jc(2);c.zb(15),c.Eb("is-invalid",t.feedback.controls.phone.invalid),c.pc("showMaskTyped",!0),c.zb(1),c.pc("ngIf",t.feedback.controls.phone.invalid),c.zb(4),c.Eb("is-invalid",t.feedback.controls.phone.invalid),c.zb(1),c.pc("ngIf",t.feedback.controls.email.invalid)}}function et(t,e){if(1&t&&(c.Tb(0,"div",19),c.Tb(1,"div",20),c.Tb(2,"h4",21),c.Lc(3,"\u0417\u0430\u0432\u0435\u0440\u0448\u0438\u0442\u044c \u0447\u0430\u0442"),c.Sb(),c.Tb(4,"button",22),c.fc("click",(function(){return e.$implicit.dismiss("Cross click")})),c.Tb(5,"span",23),c.Lc(6,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(7,"div",24),c.Tb(8,"h6",25),c.Lc(9,"\u041e\u0446\u0435\u043d\u0438\u0442\u0435 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043e\u0431\u0449\u0435\u043d\u0438\u044f"),c.Sb(),c.Tb(10,"div",26),c.Tb(11,"ngb-rating",27),c.Jc(12,K,9,10,"ng-template"),c.Sb(),c.Sb(),c.Tb(13,"div",28),c.Ob(14,"input",29),c.Sb(),c.Jc(15,tt,22,7,"div",5),c.Sb(),c.Tb(16,"div",30),c.Tb(17,"button",31),c.fc("click",(function(){return e.$implicit.dismiss("Save click")})),c.Lc(18,"\u041e\u0442\u043c\u0435\u043d\u0430"),c.Sb(),c.Tb(19,"button",32),c.fc("click",(function(){return e.$implicit.close("Save click")})),c.Lc(20," \u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c "),c.Ob(21,"i",33),c.Sb(),c.Sb(),c.Sb()),2&t){const t=c.jc();c.zb(7),c.pc("formGroup",t.feedback),c.zb(8),c.pc("ngIf",t.feedback.value.rate<=3)}}let it=(()=>{class t{constructor(t,e,i,n,r){this.chat=t,this.modalService=e,this.fb=i,this.user=n,this.injector=r,this.profileActive=!1,this.placesActive=!1,this.hidedropdown=!0,this.profile=new c.n,this.places=new c.n}get headerDropdown(){return this.hidedropdown}toggleProfile(t){this.profileActive=t,this.profile.emit(t)}togglePlaces(t){this.placesActive=t,this.places.emit(t)}ngOnInit(){this.feedback=this.fb.group({rate:[5],comment:[],phone:["",h.F.pattern("\\+?[0-9 ()-]{10,18}")],first_name:[],last_name:[],email:["",h.F.email]}),this.feedback.patchValue(this.user.user()),this.$profile=this.user.change.subscribe(t=>this.feedback.patchValue(t))}ngOnDestroy(){this.$active&&this.$active.unsubscribe(),this.$profile&&this.$profile.unsubscribe()}closeChat(){let t=this.injector.get(a.b);this.modalService.open(this.closeDlg,{ariaLabelledBy:"modal-basic-title"}).result.then(()=>{if(this.chat.activeChat._id)this.chat.closeChat(this.chat.activeChat,this.feedback.value);else{let e=t.execute("close_empty_chat").subscribe(t=>{this.chat.sendRating(this.feedback.value.value,this.user.user(),this.chat.activeChat.extra,t).then(()=>this.chat.deleteFakeChat(this.chat.activeChat.place)),e.unsubscribe()})}},()=>{console.log("Cancel clicked")})}hideDropdown(t){this.hidedropdown=!!t&&!this.hidedropdown}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(l.a),c.Nb(d.q),c.Nb(h.f),c.Nb(p),c.Nb(c.r))},t.\u0275cmp=c.Hb({type:t,selectors:[["chat-content-header"]],viewQuery:function(t,e){var i;1&t&&c.Pc(V,!0),2&t&&c.xc(i=c.gc())&&(e.closeDlg=i.first)},hostVars:2,hostBindings:function(t,e){2&t&&c.Eb("hidedropdown",e.headerDropdown)},outputs:{profile:"profile",places:"places"},decls:21,vars:2,consts:[[1,"chat-content-header","custom-flex-end"],[1,"mobile-chat-content-header"],[1,"square-back-button",3,"click"],[1,"fa","fa-arrow-left","d-block","d-lg-none","font-18"],["id","channelTitle",1,"mg-b-0","d-flex","cursor-pointer","header-place-title",3,"click"],[4,"ngIf"],["id","directTitle",1,"d-none"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-sm","avatar-online"],[1,"client_avatar","rounded-circle"],[1,"mg-l-10","mg-b-0","client_name"],["id","directAvatar",4,"ngIf"],[1,"d-flex","header-dropdown-mobile","align-items-center","cursor-pointer"],["href","javascript:void(0)","ngbTooltip","\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u0447\u0430\u0442",1,"btn","btn-success","text-nowrap",3,"click"],["name","x-circle",1,"featherIcon"],["closeDlg",""],["id","directAvatar"],[1,"avatar","avatar-sm"],[1,"client_avatar","rounded-circle",3,"src"],[1,"no-backdrop"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body",3,"formGroup"],[1,"text-center","mb-2"],[1,"d-flex","justify-content-center","my-4"],["formControlName","rate","max","5",1,"chat-rating-block"],[1,"rating-comment"],["type","text","placeholder","\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439","formControlName","comment"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],["type","button",1,"btn","btn-success",3,"click"],[1,"fa","fa-arrow-right","pl-2"],[1,"d-flex","flex-column","align-items-center","custom-star-container"],[1,"star","custom-star"],[1,"fa","fa-star"],[1,"custom-star-text","pt-1",3,"ngSwitch"],[4,"ngSwitchCase"],[1,"row"],[1,"col-sm-6","pt-2"],[1,"form-control-label","mb-1"],["type","text","name","first_name","placeholder","\u0418\u043c\u044f","formControlName","first_name",1,"form-control"],["type","text","name","last_name","placeholder","\u0424\u0430\u043c\u0438\u043b\u0438\u044f","formControlName","last_name",1,"form-control"],[1,"col-sm-6","pt-3","pb-3"],["type","phone","prefix","+","prefix","+7","mask","(000) 000 00 00","name","phone","placeholder","\u0422\u0435\u043b\u0435\u0444\u043e\u043d","formControlName","phone",1,"form-control",3,"showMaskTyped"],["class","pl-1 pt-1",4,"ngIf"],["type","text","name","email","placeholder","\u042d\u043b.\u043f\u043e\u0447\u0442\u0430","formControlName","email",1,"form-control"],[1,"pl-1","pt-1"],[1,"text-danger"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.fc("click",(function(){return e.togglePlaces(!0)})),c.Ob(3,"i",3),c.Sb(),c.Tb(4,"h6",4),c.fc("click",(function(){return e.togglePlaces(!0)})),c.Jc(5,B,2,1,"ng-container",5),c.Sb(),c.Tb(6,"div",6),c.Tb(7,"div",7),c.Tb(8,"div",8),c.Ob(9,"img",9),c.Sb(),c.Tb(10,"h6",10),c.Lc(11,"\u041a\u043b\u0438\u0435\u043d\u0442"),c.Sb(),c.Sb(),c.Sb(),c.Jc(12,F,7,8,"div",11),c.Sb(),c.Tb(13,"div",12),c.Tb(14,"div"),c.Tb(15,"a",13),c.fc("click",(function(){return e.closeChat()})),c.Ob(16,"i-feather",14),c.Tb(17,"span"),c.Lc(18,"\u041e\u0446\u0435\u043d\u0438\u0442\u044c \u0447\u0430\u0442"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Jc(19,et,22,2,"ng-template",null,15,c.Kc)),2&t&&(c.zb(5),c.pc("ngIf",e.chat.activePlace),c.zb(7),c.pc("ngIf",e.chat.activeReply))},directives:[n.u,d.X,W.b,h.s,h.k,d.O,h.r,h.i,h.c,n.y,n.z,H.a],pipes:[N.c],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;color:#deb0b0}.filled[_ngcontent-%COMP%]{color:#ff1e1e}.bad[_ngcontent-%COMP%]{color:#b0c4de}.filled.bad[_ngcontent-%COMP%]{color:#1e90ff}"]}),t})();var nt=i("QNxT"),rt=i("wd/R"),st=i("AytR");const ot=["picZoom"],at=["image_holder"];function ct(t,e){if(1&t&&(c.Tb(0,"div"),c.Tb(1,"div",8),c.Ob(2,"img",9),c.Sb(),c.Sb()),2&t){const t=c.jc();c.zb(1),c.Eb("avatar-online","online"==t.status)("avatar-offline","offline"==t.status),c.zb(1),c.pc("src",t.avatar,c.Dc)}}function lt(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div"),c.Tb(1,"img",10),c.fc("click",(function(){return c.Bc(t),c.jc().zoom()}))("load",(function(e){return c.Bc(t),c.jc().change_height(e)})),c.Sb(),c.Sb()}if(2&t){const t=c.jc();c.Ic("height",t.height,"px"),c.zb(1),c.Ic("max-height",t.height,"px"),c.pc("src",t.img,c.Dc)}}function ht(t,e){if(1&t&&(c.Tb(0,"div",11),c.Tb(1,"h4",12),c.Lc(2),c.Sb(),c.Tb(3,"button",13),c.fc("click",(function(){return e.$implicit.dismiss("Cross click")})),c.Tb(4,"span",14),c.Lc(5,"\xd7"),c.Sb(),c.Sb(),c.Sb(),c.Tb(6,"div",15),c.Ob(7,"img",16),c.Sb(),c.Tb(8,"div",17),c.Tb(9,"button",18),c.fc("click",(function(){return e.$implicit.close("Save click")})),c.Lc(10,"Ok"),c.Sb(),c.Sb()),2&t){const t=c.jc();c.zb(2),c.Mc(t.userName),c.zb(5),c.pc("src",t.img,c.Dc)}}let bt=(()=>{class t{constructor(t,e){this.chat=t,this.modalService=e,this.height=500}update(){Object(nt.c)(this.msg)?(this.text=this.msg.text,this.userName=Object(nt.e)(this.chat.activeText),this.direction="reply"===this.right?"right":"left","reply"===this.right&&this.chat.activeText&&(this.avatar=this.chat.avatar(this.chat.activeText.avatar),this.status=this.chat.activeText.status)):Object(nt.b)(this.msg)&&(this.text=this.msg.reply,this.userName=Object(nt.e)(this.chat.activeReply),this.direction="reply"===this.right?"left":"right","text"===this.right&&this.chat.activeReply&&(this.avatar=this.chat.avatar(this.chat.activeReply.avatar),this.status=this.chat.activeReply.status)),this.msg.img&&(this.img=st.a.picBase+this.msg.img),this.age=this.msg.date?rt(this.msg.date).format("LT"):"",this.date=this.msg.date?rt(this.msg.date).format("L"):""}ngOnInit(){this.update(),this.$changes=this.chat.changes.subscribe(()=>this.update()),this.$active=this.chat.active.subscribe(()=>this.update())}ngOnDestroy(){this.$active&&this.$active.unsubscribe(),this.$changes&&this.$changes.unsubscribe()}zoom(){this.modalService.open(this.picZoom,{ariaLabelledBy:"modal-basic-title"})}change_height(t){let e=t.currentTarget.height,i=t.currentTarget.width;const n=this.image_holder.nativeElement.offsetWidth;i>n?this.height=e/i*n*.8-30:e<this.height&&(this.height=e)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(l.a),c.Nb(d.q))},t.\u0275cmp=c.Hb({type:t,selectors:[["chat-content-message"]],viewQuery:function(t,e){var i;1&t&&(c.Pc(ot,!0),c.Pc(at,!0)),2&t&&(c.xc(i=c.gc())&&(e.picZoom=i.first),c.xc(i=c.gc())&&(e.image_holder=i.first))},inputs:{right:"right",msg:"msg"},decls:13,vars:7,consts:[[1,"media","align-items-end"],["image_holder",""],[4,"ngIf"],[1,"media-body"],[1,"msg-wrapper"],[3,"height",4,"ngIf"],[3,"innerHTML"],["picZoom",""],[1,"avatar","avatar-sm"],[1,"client_avatar","rounded-circle",3,"src"],[2,"width","auto",3,"src","click","load"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"src"],[1,"modal-footer","d-flex","justify-content-between"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0,1),c.Jc(2,ct,3,5,"div",2),c.Tb(3,"div",3),c.Tb(4,"div",4),c.Tb(5,"h6"),c.Lc(6),c.Tb(7,"small"),c.Lc(8),c.Sb(),c.Sb(),c.Jc(9,lt,2,5,"div",5),c.Ob(10,"p",6),c.Sb(),c.Sb(),c.Sb(),c.Jc(11,ht,11,2,"ng-template",null,7,c.Kc)),2&t&&(c.Eb("author","left"==e.direction),c.zb(2),c.pc("ngIf",e.avatar),c.zb(4),c.Nc("",e.userName," "),c.zb(2),c.Mc(e.age),c.zb(1),c.pc("ngIf",e.img),c.zb(1),c.pc("innerHTML",e.text,c.Cc))},directives:[n.u],styles:[""]}),t})();var pt=i("Kdsb"),dt=i("OMj6"),ut=i("s2oM");const ft=["FileSelectInputDialog"];function gt(t,e){1&t&&c.Pb(0)}function mt(t,e){1&t&&c.Ob(0,"i-feather",22)}function vt(t,e){1&t&&c.Ob(0,"i-feather",23)}function wt(t,e){1&t&&(c.Tb(0,"p",24),c.Lc(1,"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043b\u0438\u0431\u043e \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043f\u0440\u0435\u0449\u0435\u043d\u044b, \u043b\u0438\u0431\u043e \u0412\u0430\u0448 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043d\u0435 \u043f\u043e\u0434\u0434\u0435\u0440\u0436\u0438\u0432\u0430\u0435\u0442 \u043c\u0435\u0445\u0430\u043d\u0438\u0437\u043c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"),c.Sb())}let St=(()=>{class t{constructor(t,e,i){this.profile_service=t,this.cd=e,this.notify=i,this.config={},this.close=new c.n}ngOnInit(){this.profile=this.profile_service.form(),this.profile.patchValue({notify:this.notify.notify}),this.notify.enabled||this.profile.controls.notify.disable(),this.image=this.profile.value.avatar}save(){this.profile_service.save(Object.assign(Object.assign({},this.profile.value),{avatar:this.image})),this.close.emit(!0),this.cd.detectChanges()}cancel(){this.profile=this.profile_service.form(),this.close.emit(!1)}}return t.\u0275fac=function(e){return new(e||t)(c.Nb(p),c.Nb(c.h),c.Nb(dt.a))},t.\u0275cmp=c.Hb({type:t,selectors:[["chat-content-sidebar"]],viewQuery:function(t,e){var i;1&t&&(c.Pc(pt.c,!0),c.Pc(ft,!0)),2&t&&(c.xc(i=c.gc())&&(e.body=i.first),c.xc(i=c.gc())&&(e.FileSelectInputDialog=i.first))},outputs:{close:"close"},decls:37,vars:7,consts:[[1,"chat-sidebar-right",3,"perfectScrollbar"],[1,"pd-y-20","pd-x-10"],[1,"tx-10","tx-uppercase","tx-medium","tx-color-03","tx-sans","tx-spacing-1","pd-l-10"],["id","chatMemberList",1,"chat-member-list"],["id","formProfile",3,"formGroup"],[1,"form-group","row","p-2"],[1,"col-sm-12","mb-3"],[1,"form-control-label"],["type","text","name","first_name","placeholder","\u0418\u043c\u044f","formControlName","first_name",1,"form-control"],["type","text","name","last_name","placeholder","\u0424\u0430\u043c\u0438\u043b\u0438\u044f","formControlName","last_name",1,"form-control"],["id","file","type","file",1,"d-none"],["type","hidden","name","avatar"],[3,"image","imageChange"],[1,"subscribe-toggler-container","d-flex",3,"click"],[1,"table-toggler","pr-2"],[4,"ngIf","ngIfThen","ngIfElse"],["enabled",""],["disabled",""],["class","pt-2",4,"ngIf"],[1,"d-flex","justify-content-between"],["type","button","id","btnProfileSave",1,"btn","btn-primary",3,"click"],["type","button","id","btnProfileCancel",1,"btn","btn-secondary",3,"click"],["name","toggle-right"],["name","toggle-left"],[1,"pt-2"]],template:function(t,e){if(1&t&&(c.Tb(0,"div",0),c.Tb(1,"div",1),c.Tb(2,"div",2),c.Lc(3,"\u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c"),c.Sb(),c.Tb(4,"div",3),c.Tb(5,"form",4),c.Tb(6,"div",5),c.Tb(7,"fieldset",6),c.Tb(8,"label",7),c.Lc(9,"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f"),c.Sb(),c.Ob(10,"input",8),c.Sb(),c.Tb(11,"fieldset",6),c.Tb(12,"label",7),c.Lc(13,"\u0424\u0430\u043c\u0438\u043b\u0438\u044f"),c.Sb(),c.Ob(14,"input",9),c.Sb(),c.Tb(15,"fieldset",6),c.Tb(16,"label",7),c.Lc(17,"\u0412\u0430\u0448 \u0430\u0432\u0430\u0442\u0430\u0440"),c.Sb(),c.Ob(18,"input",10),c.Ob(19,"input",11),c.Tb(20,"cmn-avatar-editor",12),c.fc("imageChange",(function(t){return e.image=t})),c.Sb(),c.Sb(),c.Tb(21,"fieldset",6),c.Tb(22,"div",13),c.fc("click",(function(){return e.profile.value.notify=!e.profile.value.notify})),c.Tb(23,"div",14),c.Jc(24,gt,1,0,"ng-container",15),c.Sb(),c.Tb(25,"span"),c.Lc(26,"\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043d\u0430 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"),c.Sb(),c.Sb(),c.Jc(27,mt,1,0,"ng-template",null,16,c.Kc),c.Jc(29,vt,1,0,"ng-template",null,17,c.Kc),c.Jc(31,wt,2,0,"p",18),c.Sb(),c.Sb(),c.Tb(32,"div",19),c.Tb(33,"button",20),c.fc("click",(function(){return e.save()})),c.Lc(34,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),c.Sb(),c.Tb(35,"button",21),c.fc("click",(function(){return e.cancel()})),c.Lc(36,"\u041e\u0442\u043c\u0435\u043d\u0430"),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb(),c.Sb()),2&t){const t=c.yc(28),i=c.yc(30);c.pc("perfectScrollbar",e.config),c.zb(5),c.pc("formGroup",e.profile),c.zb(15),c.pc("image",e.image),c.zb(4),c.pc("ngIf",e.profile.value.notify)("ngIfThen",t)("ngIfElse",i),c.zb(7),c.pc("ngIf",!e.notify.enabled)}},directives:[pt.c,h.H,h.s,h.k,h.c,h.r,h.i,ut.a,n.u,W.b],styles:[".hidden[_ngcontent-%COMP%]{display:none}"]}),t})();var yt=i("XPsC"),Tt=i("rIor");const _t=["video"],kt=["canvas"];function xt(t,e){if(1&t){const t=c.Ub();c.Tb(0,"div",6),c.fc("click",(function(){return c.Bc(t),c.jc().rotateVideoInput(!0)})),c.Sb()}}class Ot{constructor(t,e,i){this._mimeType=null,this._imageAsBase64=null,this._imageAsDataUrl=null,this._imageData=null,this._mimeType=e,this._imageAsDataUrl=t,this._imageData=i}static getDataFromDataUrl(t,e){return t.replace(`data:${e};base64,`,"")}get imageAsBase64(){return this._imageAsBase64?this._imageAsBase64:this._imageAsBase64=Ot.getDataFromDataUrl(this._imageAsDataUrl,this._mimeType)}get imageAsDataUrl(){return this._imageAsDataUrl}get imageData(){return this._imageData}}var Rt;let Et=(()=>{let t=Rt=class{constructor(){this.width=640,this.height=480,this.videoOptions=Rt.DEFAULT_VIDEO_OPTIONS,this.allowCameraSwitch=!0,this.captureImageData=!1,this.imageType=Rt.DEFAULT_IMAGE_TYPE,this.imageQuality=Rt.DEFAULT_IMAGE_QUALITY,this.imageCapture=new c.n,this.initError=new c.n,this.imageClick=new c.n,this.cameraSwitched=new c.n,this.availableVideoInputs=[],this.videoInitialized=!1,this.activeVideoInputIndex=-1,this.mediaStream=null,this.activeVideoSettings=null}set trigger(t){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.triggerSubscription=t.subscribe(()=>{this.takeSnapshot()})}set switchCamera(t){this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe(),this.switchCameraSubscription=t.subscribe(t=>{"string"==typeof t?this.switchToVideoInput(t):this.rotateVideoInput(!1!==t)})}static getMediaConstraintsForDevice(t,e){const i=e||this.DEFAULT_VIDEO_OPTIONS;return t&&(i.deviceId={exact:t}),i}static getDeviceIdFromMediaStreamTrack(t){if(t.getSettings&&t.getSettings()&&t.getSettings().deviceId)return t.getSettings().deviceId;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().deviceId){const e=t.getConstraints().deviceId;return Rt.getValueFromConstrainDOMString(e)}}static getFacingModeFromMediaStreamTrack(t){if(t){if(t.getSettings&&t.getSettings()&&t.getSettings().facingMode)return t.getSettings().facingMode;if(t.getConstraints&&t.getConstraints()&&t.getConstraints().facingMode){const e=t.getConstraints().facingMode;return Rt.getValueFromConstrainDOMString(e)}}}static isUserFacing(t){const e=Rt.getFacingModeFromMediaStreamTrack(t);return!!e&&"user"===e.toLowerCase()}static getValueFromConstrainDOMString(t){if(t){if(t instanceof String)return String(t);if(Array.isArray(t)&&Array(t).length>0)return String(t[0]);if("object"==typeof t){if(t.exact)return String(t.exact);if(t.ideal)return String(t.ideal)}}return null}ngAfterViewInit(){this.detectAvailableDevices().then(()=>{this.switchToVideoInput(null)}).catch(t=>{this.initError.next({message:t}),this.switchToVideoInput(null)})}ngOnDestroy(){this.stopMediaTracks(),this.unsubscribeFromSubscriptions()}takeSnapshot(){const t=this.nativeVideoElement,e={width:this.width,height:this.height};t.videoWidth&&(e.width=t.videoWidth,e.height=t.videoHeight);const i=this.canvas.nativeElement;i.width=e.width,i.height=e.height;const n=i.getContext("2d");n.drawImage(t,0,0);const r=this.imageType?this.imageType:Rt.DEFAULT_IMAGE_TYPE,s=i.toDataURL(r,this.imageQuality?this.imageQuality:Rt.DEFAULT_IMAGE_QUALITY);let o=null;this.captureImageData&&(o=n.getImageData(0,0,i.width,i.height)),this.imageCapture.next(new Ot(s,r,o))}rotateVideoInput(t){this.availableVideoInputs&&this.availableVideoInputs.length>1&&this.switchToVideoInput(this.availableVideoInputs[(this.activeVideoInputIndex+(t?1:this.availableVideoInputs.length-1))%this.availableVideoInputs.length].deviceId)}switchToVideoInput(t){this.videoInitialized=!1,this.stopMediaTracks(),this.initWebcam(t,this.videoOptions)}videoResize(){}get videoWidth(){const t=this.getVideoAspectRatio();return Math.min(this.width,this.height*t)}get videoHeight(){const t=this.getVideoAspectRatio();return Math.min(this.height,this.width/t)}get videoStyleClasses(){let t="";return this.isMirrorImage()&&(t+="mirrored "),t.trim()}get nativeVideoElement(){return this.video.nativeElement}getVideoAspectRatio(){const t=this.nativeVideoElement;return t.videoWidth&&t.videoWidth>0&&t.videoHeight&&t.videoHeight>0?t.videoWidth/t.videoHeight:this.width/this.height}initWebcam(t,e){const i=this.nativeVideoElement;if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia){const n=Rt.getMediaConstraintsForDevice(t,e);navigator.mediaDevices.getUserMedia({video:n}).then(t=>{this.mediaStream=t,i.srcObject=t,i.play(),this.activeVideoSettings=t.getVideoTracks()[0].getSettings();const e=Rt.getDeviceIdFromMediaStreamTrack(t.getVideoTracks()[0]);this.cameraSwitched.next(e),this.detectAvailableDevices().then(()=>{this.activeVideoInputIndex=e?this.availableVideoInputs.findIndex(t=>t.deviceId===e):-1,this.videoInitialized=!0}).catch(()=>{this.activeVideoInputIndex=-1,this.videoInitialized=!0})}).catch(t=>{this.initError.next({message:t.message,mediaStreamError:t})})}else this.initError.next({message:"Cannot read UserMedia from MediaDevices."})}getActiveVideoTrack(){return this.mediaStream?this.mediaStream.getVideoTracks()[0]:null}isMirrorImage(){if(!this.getActiveVideoTrack())return!1;{let t="auto";switch(this.mirrorImage&&("string"==typeof this.mirrorImage?t=String(this.mirrorImage).toLowerCase():this.mirrorImage.x&&(t=this.mirrorImage.x.toLowerCase())),t){case"always":return!0;case"never":return!1}}return Rt.isUserFacing(this.getActiveVideoTrack())}stopMediaTracks(){this.mediaStream&&this.mediaStream.getTracks&&this.mediaStream.getTracks().forEach(t=>t.stop())}unsubscribeFromSubscriptions(){this.triggerSubscription&&this.triggerSubscription.unsubscribe(),this.switchCameraSubscription&&this.switchCameraSubscription.unsubscribe()}detectAvailableDevices(){return new Promise((t,e)=>{(class{static getAvailableVideoInputs(){return navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?new Promise((t,e)=>{navigator.mediaDevices.enumerateDevices().then(e=>{t(e.filter(t=>"videoinput"===t.kind))}).catch(t=>{e(t.message||t)})}):Promise.reject("enumerateDevices() not supported.")}}).getAvailableVideoInputs().then(e=>{this.availableVideoInputs=e,t(e)}).catch(t=>{this.availableVideoInputs=[],e(t)})})}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.Hb({type:t,selectors:[["webcam"]],viewQuery:function(t,e){var i;1&t&&(c.Hc(_t,!0),c.Hc(kt,!0)),2&t&&(c.xc(i=c.gc())&&(e.video=i.first),c.xc(i=c.gc())&&(e.canvas=i.first))},inputs:{width:"width",height:"height",videoOptions:"videoOptions",allowCameraSwitch:"allowCameraSwitch",captureImageData:"captureImageData",imageType:"imageType",imageQuality:"imageQuality",trigger:"trigger",switchCamera:"switchCamera",mirrorImage:"mirrorImage"},outputs:{imageCapture:"imageCapture",initError:"initError",imageClick:"imageClick",cameraSwitched:"cameraSwitched"},decls:6,vars:7,consts:[[1,"webcam-wrapper",3,"click"],["autoplay","","muted","","playsinline","",3,"width","height","resize"],["video",""],["class","camera-switch",3,"click",4,"ngIf"],[3,"width","height"],["canvas",""],[1,"camera-switch",3,"click"]],template:function(t,e){1&t&&(c.Tb(0,"div",0),c.fc("click",(function(){return e.imageClick.next()})),c.Tb(1,"video",1,2),c.fc("resize",(function(){return e.videoResize()})),c.Sb(),c.Jc(3,xt,1,0,"div",3),c.Ob(4,"canvas",4,5),c.Sb()),2&t&&(c.zb(1),c.Bb(e.videoStyleClasses),c.pc("width",e.videoWidth)("height",e.videoHeight),c.zb(2),c.pc("ngIf",e.allowCameraSwitch&&e.availableVideoInputs.length>1&&e.videoInitialized),c.zb(1),c.pc("width",e.width)("height",e.height))},directives:[n.u],styles:[".webcam-wrapper[_ngcontent-%COMP%]{display:inline-block;position:relative;line-height:0}.webcam-wrapper[_ngcontent-%COMP%]   video.mirrored[_ngcontent-%COMP%]{transform:scale(-1,1)}.webcam-wrapper[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{display:none}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]{background-color:rgba(0,0,0,.1);background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAE9UlEQVR42u2aT2hdRRTGf+cRQqghSqihdBFDkRISK2KDfzDWxHaRQHEhaINKqa1gKQhd6EZLN+IidCH+Q0oWIkVRC21BQxXRitVaSbKoJSGtYGoK2tQ/tU1jY5v0c5F54Xl7b/KSO/PyEt+3e5f75p7zzZwzZ74zUEIJJfyfYaEGllQGVAGZlENdBy6Z2cSiYFTSKkkfS/pH/nBF0kFJdUW9AiRVASeAukD8DgNrzOySrwEzng18KaDzALXuG8W3AiStAvqBisBRNg40mtlPxbYCOgvgPO4bncWW+JpVeDQXRQhIygDfA00F5r0XuNfMrgclQFI98DDQCNQA5ZFXqoCWBVp8XwHRHeEqcN7loy/NbHBesyqpQ1KfFj/6nC+ZvFaApFrgPaCZpYVvgCfNbDiRAElNwGFg+RIt/X8H2s2s9wYCJDUAR4HqJX7++RN40MwGpgmQVAH0AQ2BPz4AHHPl8nBOAqtyFWQjsA6oL4Ada81sPDv7uwImod8kvSJp9RyS8O2SXnb/DYVd2Y9VSroQ4ANXJO2WVJmixqh0kzMWwL4LkiqRtDnA4D1zmfE8j9g9AezcnAHaPcfXdbfdnPZ2Yps6+DwAvO/Z1naTdApY7Xng48BDZnY1MpMVQBuw3iXc5Tnb0wBwBPjUzP6eoezuArZ6svM0geJLkvZEYnl3nkntoqROSbckSW2Suj3ZOIangc7GPJuUtNGdFIfmMeavktoSSKiW9LMPw30Q8JqkekmjCbOZRhuclLQjgYSNxUBAj6RyZ9ATgUJpUtJTCSR8vpAEXHAyWK5BXYFIGHOlepSAloUk4NEYgyoknQhEwhFJ0e8h6VSaQeerCb5uZgdi9utxYBNwOUD93hIVXswM4INCi6K9wAszFC2DwLOBDjHbYp59karIUnRdzYy/3ClqVklaUhfwTICj7K25OqA7a4wWagVsm4Me/xzwg2cCqqONFzO7DPxSCAJi436GUBgHHguQD2oTlJ55oSzP9ybccsttSJw1szdjFOSnI/8dTCGZHwcORp4Nx7y3B1iZ8/sm4MW8/Euxg5wIsS/HaAp3zeP4/G7obRDXI4jiTIA22H7Xdc7X+S3A5lC7QBQ357aq3VAjCeSkwUfAJrfvz+R8A9ADLAtZB+TinpjC5JMA+//jwPZZnF8G7J+L8z4IWB/zbG+gIujVWfLBW/NStVMmqaG4POJRsIjix7h8IGnLQuoBbQki5sVAJHyYm7YkNaRRtXwQ8G1cHpX0iKRrgUjYno17Sf0LrQhJUkdCeHWkVITGJI0k1QeS3ikGSUzOyJUJJNznYneuOCnpTldcxa2kP3xJYqOeSDjqZG8ShJLnE8TTuMS6Iyu1BW7djZqkfo9N0QOuYJmYQddfB7RG+gLTNzqAY9FrL+5/nwEbvDdJJe3zzOrhNP3AWRqmk55t3ZcBuj3b2gb0Sbrbo/NNzk7fFzu7s/E5EiC+rrmeQU0Kx2skvRFoOx2ZzlmSdgbsw49JetvtBpk8nM64d/cGbNtJ0s7cGyJlwHeEv+t3nqnLSgPAUOSGyG3AHUxdzqoJbEcvcL+ZTeTeEapzJKxgaeOcc/7Mf06D7kFrguS0VDAMtGadv+E47DT9tcChJej8ISfpD+abgTe45uOkFi8mnQ+JBVQ+d4VXuOptjavcyot8pq86mfwk8LWZnaOEEkoooYQSSojDv8AhQNeGfe0jAAAAAElFTkSuQmCC);background-repeat:no-repeat;border-radius:5px;position:absolute;right:13px;top:10px;height:48px;width:48px;background-size:80%;cursor:pointer;background-position:center;transition:background-color .2s}.webcam-wrapper[_ngcontent-%COMP%]   .camera-switch[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.18)}"]}),t.DEFAULT_VIDEO_OPTIONS={facingMode:"environment"},t.DEFAULT_IMAGE_TYPE="image/jpeg",t.DEFAULT_IMAGE_QUALITY=.92,t})(),Lt=(()=>{let t=class{};return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})();const It={suppressScrollX:!0};let Ct=(()=>{class t{}return t.\u0275mod=c.Lb({type:t}),t.\u0275inj=c.Kb({factory:function(e){return new(e||t)},providers:[p,{provide:pt.a,useValue:It}],imports:[[n.c,h.m,h.B,r.a,pt.d,yt.a,X,d.r,Tt.b,H.c,Lt]]}),t})();c.Ec(P,[n.r,n.s,n.t,n.u,n.B,n.x,n.y,n.z,n.A,n.v,n.w,h.H,h.w,h.G,h.c,h.x,h.A,h.a,h.D,h.E,h.z,h.r,h.s,h.C,h.o,h.n,h.y,h.b,h.d,h.u,h.v,h.t,h.h,h.k,h.i,h.l,h.e,W.b,pt.b,pt.c,ut.a,s.g,s.c,s.e,s.d,s.h,d.a,d.F,d.I,d.G,d.H,d.J,d.b,d.c,d.e,d.N,d.M,d.d,d.P,d.f,d.g,d.h,d.p,d.i,d.j,d.k,d.n,d.m,d.l,d.x,d.t,d.s,d.u,d.v,d.w,d.y,d.z,d.A,d.B,d.C,d.D,d.E,d.K,d.L,d.O,d.U,d.V,d.W,d.X,d.Y,d.o,d.T,d.Q,d.R,d.S,Tt.a,H.a,Et,P,M.a,z.a,j.a,it,bt,St],[n.b,n.I,n.q,n.l,n.F,n.g,n.D,n.G,n.d,n.f,n.j,n.k,n.m,N.a,N.c,N.b,H.b]),c.Ec(j.a,[n.r,n.s,n.t,n.u,n.B,n.x,n.y,n.z,n.A,n.v,n.w,h.H,h.w,h.G,h.c,h.x,h.A,h.a,h.D,h.E,h.z,h.r,h.s,h.C,h.o,h.n,h.y,h.b,h.d,h.u,h.v,h.t,h.h,h.k,h.i,h.l,h.e,W.b,pt.b,pt.c,ut.a,s.g,s.c,s.e,s.d,s.h,d.a,d.F,d.I,d.G,d.H,d.J,d.b,d.c,d.e,d.N,d.M,d.d,d.P,d.f,d.g,d.h,d.p,d.i,d.j,d.k,d.n,d.m,d.l,d.x,d.t,d.s,d.u,d.v,d.w,d.y,d.z,d.A,d.B,d.C,d.D,d.E,d.K,d.L,d.O,d.U,d.V,d.W,d.X,d.Y,d.o,d.T,d.Q,d.R,d.S,Tt.a,H.a,Et,P,M.a,z.a,j.a,it,bt,St],[n.b,n.I,n.q,n.l,n.F,n.g,n.D,n.G,n.d,n.f,n.j,n.k,n.m,N.a,N.c,N.b,H.b])},"3UWI":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("D0XW"),r=i("l7GE"),s=i("ZUHj");class o{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new a(t,this.durationSelector))}}class a extends r.a{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let i;try{const{durationSelector:e}=this;i=e(t)}catch(e){return this.destination.error(e)}const n=Object(s.a)(this,i);!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}clearThrottle(){const{value:t,hasValue:e,throttled:i}=this;i&&(this.remove(i),this.throttled=null,i.unsubscribe()),e&&(this.value=null,this.hasValue=!1,this.destination.next(t))}notifyNext(t,e,i,n){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var c=i("PqYM");function l(t,e=n.a){return i=()=>Object(c.a)(t,e),function(t){return t.lift(new o(i))};var i}},CWLH:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("fXoL"),r=i("DQTw"),s=i("tyNb"),o=i("1kSV");let a=(()=>{class t{constructor(t){this.chat=t,this.showSidebarRight=!1,this.profileActive=!1,this.profile=new n.n,this.user=null}toggleProfile(t){this.profileActive=t,this.profile.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(r.a))},t.\u0275cmp=n.Hb({type:t,selectors:[["chat-sidebar-footer"]],inputs:{user:"user"},outputs:{profile:"profile"},decls:13,vars:3,consts:[[1,"chat-sidebar-footer"],["id","btnQR",1,"mobile-nav-element"],["routerLink","/qrscanner","ngbTooltip","\u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR \u043a\u043e\u0434",1,"d-flex","align-items-center"],[1,"fa","fa-qrcode","font-28","pr-1"],[1,"mb-0"],["id","btnProfile",1,"mobile-nav-element"],["id","showMemberList","href","javascript:void(0)",1,"d-flex","align-items-center",3,"click"],[1,"avatar","avatar-sm","avatar-online","mg-r-8"],["alt","",1,"owner_avatar","rounded-circle",3,"src"]],template:function(t,e){1&t&&(n.Tb(0,"div",0),n.Tb(1,"div"),n.Tb(2,"nav",1),n.Tb(3,"a",2),n.Ob(4,"i",3),n.Tb(5,"p",4),n.Lc(6," \u041e\u0442\u0441\u043a\u0430\u043d\u0438\u0440\u043e\u0432\u0430\u0442\u044c QR "),n.Sb(),n.Sb(),n.Sb(),n.Tb(7,"nav",5),n.Tb(8,"a",6),n.fc("click",(function(){return e.toggleProfile(!0)})),n.Tb(9,"div",7),n.Ob(10,"img",8),n.Sb(),n.Tb(11,"p",4),n.Lc(12," \u0412\u0430\u0448 \u043f\u0440\u043e\u0444\u0438\u043b\u044c "),n.Sb(),n.Sb(),n.Sb(),n.Sb(),n.Sb()),2&t&&(n.zb(8),n.Eb("active",e.profileActive),n.zb(2),n.pc("src",e.chat.avatar(e.user.avatar),n.Dc))},directives:[s.e,o.X],styles:[""]}),t})()},K7yv:function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i("fXoL"),r=i("XNiG"),s=i("wd/R"),o=i("Kdsb"),a=i("tk/3"),c=i("DQTw"),l=i("3Pt+"),h=i("1kSV");const b=["existing_image"],p=["FileSelectInputDialog"],d=["image_from_cam"];function u(t,e){if(1&t&&(n.Tb(0,"div",23),n.Lc(1),n.Sb()),2&t){const t=n.jc().$implicit,e=n.jc(2);n.zb(1),n.Mc(e.date(t.date))}}function f(t,e){if(1&t&&(n.Rb(0),n.Jc(1,u,2,1,"div",21),n.Ob(2,"chat-content-message",22),n.Qb()),2&t){const t=e.$implicit,i=e.index,r=n.jc(2);n.zb(1),n.pc("ngIf",t.date&&(0==i||r.date(t.date)!==r.date(r.chat.activeChat.msg[i-1].date))),n.zb(1),n.pc("right",r.right)("msg",t)}}function g(t,e){if(1&t&&(n.Rb(0),n.Ob(1,"div",24),n.Ob(2,"chat-content-message",22),n.Qb()),2&t){const t=e.$implicit,i=n.jc(2);n.zb(2),n.pc("right",i.right)("msg",t)}}function m(t,e){if(1&t&&(n.Rb(0),n.Jc(1,f,3,3,"ng-container",20),n.Jc(2,g,3,2,"ng-container",20),n.Qb()),2&t){const t=n.jc();n.zb(1),n.pc("ngForOf",t.chat.activeChat.msg),n.zb(1),n.pc("ngForOf",t.chat.activeChat.pend)}}function v(t,e){if(1&t&&(n.Rb(0),n.Tb(1,"div",25),n.Tb(2,"div",26),n.Tb(3,"div",27),n.Tb(4,"p"),n.Lc(5,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"),n.Sb(),n.Ob(6,"ngb-progressbar",28),n.Sb(),n.Sb(),n.Sb(),n.Qb()),2&t){const t=n.jc();n.zb(6),n.pc("value",t.progress)}}function w(t,e){if(1&t){const t=n.Ub();n.Tb(0,"div",29),n.Tb(1,"h4",30),n.Lc(2,"\u0412\u044b\u0431\u0440\u0430\u043d\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0441\u0442\u044c \u0431\u0443\u0434\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0430"),n.Sb(),n.Tb(3,"button",31),n.fc("click",(function(){return e.$implicit.dismiss("Cross click")})),n.Tb(4,"span",32),n.Lc(5,"\xd7"),n.Sb(),n.Sb(),n.Sb(),n.Tb(6,"div",33),n.Tb(7,"image-cropper",34),n.fc("imageCropped",(function(e){return n.Bc(t),n.jc().imageCropped(e)})),n.Sb(),n.Sb(),n.Tb(8,"div",35),n.Tb(9,"button",36),n.fc("click",(function(){return e.$implicit.close("Ok click")})),n.Lc(10,"Ok"),n.Sb(),n.Sb()}if(2&t){const t=n.jc();n.zb(7),n.pc("imageChangedEvent",t.imageChangedEvent)("onlyScaleDown",!0)("maintainAspectRatio",!1)}}function S(t,e){if(1&t){const t=n.Ub();n.Tb(0,"webcam",37),n.fc("imageCapture",(function(i){n.Bc(t);const r=e.$implicit;return n.jc().handleImage(i),r.close("Ok click")})),n.Sb(),n.Tb(1,"div",35),n.Tb(2,"button",36),n.fc("click",(function(){return n.Bc(t),n.jc().triggerSnapshot()})),n.Lc(3,"\u0421\u0434\u0435\u043b\u0430\u0442\u044c \u0441\u043d\u0438\u043c\u043e\u043a "),n.Sb(),n.Sb()}if(2&t){const t=n.jc();n.pc("trigger",t.triggerObservable)("allowCameraSwitch",!0)}}let y=(()=>{class t{constructor(t,e,i,s,o){this.chat=t,this.cdr=e,this.fb=i,this.modalService=s,this.http=o,this.hidedropdown=!0,this.profile=new n.n,this.places=new n.n,this.available=new n.n,this.config={},this.imageChangedEvent="",this.trigger=new r.a,this.webcamImage=null}get headerDropdown(){return this.hidedropdown}date(t){return s(t).format("L")}ngOnInit(){this.form=this.fb.group({message:[],rate:[]}),this.$active=this.chat.active.subscribe({next:()=>{this.available.emit(void 0===this.chat.activeChat),setTimeout(()=>this.body.scrollToBottom(),300)}}),this.$changes=this.chat.changes.subscribe(()=>{this.cdr.detectChanges(),this.body.scrollToBottom()})}ngOnDestroy(){this.$active&&this.$active.unsubscribe(),this.$changes&&this.$changes.unsubscribe(),this.$scroll&&clearInterval(this.$scroll)}send(t){if(this.form.value.message){const t=this.form.value.message.trim();this.chat.sendMessage(t)&&this.form.patchValue({message:""})}}openImageDialog(){return new Promise(t=>{this.FileSelectInputDialog.nativeElement.click(),this.openResolve=t})}fileChangeEvent(t){this.imageChangedEvent=t,this.cropImage()}cropImage(){this.modalService.open(this.existingImage,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>this.publishPic(),t=>{}).then(()=>this.openResolve())}imageCropped(t){this.newImage=t.base64}takeImageDialog(){return this.modalService.open(this.imageFromCam,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>this.publishPic(),t=>{})}get triggerObservable(){return this.trigger.asObservable()}triggerSnapshot(){this.trigger.next()}handleImage(t){this.newImage=t.imageAsBase64,this.publishPic()}publishPic(){return new Promise((t,e)=>{try{const e=this.chat.publishPicture(this.newImage);e&&e.subscribe(e=>{e.type===a.c.UploadProgress&&(this.progress=100*e.loaded/e.total),e.type===a.c.Response&&(this.newImage=void 0,this.body.scrollToBottom(),t())}),this.body.scrollToBottom()}catch(i){e(i)}})}hideDropdown(t){this.hidedropdown=!!t&&!this.hidedropdown}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(c.a),n.Nb(n.h),n.Nb(l.f),n.Nb(h.q),n.Nb(a.a))},t.\u0275cmp=n.Hb({type:t,selectors:[["chat-content"]],viewQuery:function(t,e){var i;1&t&&(n.Pc(o.c,!0),n.Pc(b,!0),n.Pc(p,!0),n.Pc(d,!0)),2&t&&(n.xc(i=n.gc())&&(e.body=i.first),n.xc(i=n.gc())&&(e.existingImage=i.first),n.xc(i=n.gc())&&(e.FileSelectInputDialog=i.first),n.xc(i=n.gc())&&(e.imageFromCam=i.first))},hostVars:2,hostBindings:function(t,e){1&t&&n.fc("keydown.enter",(function(t){return e.send(t)})),2&t&&n.Eb("hidedropdown",e.headerDropdown)},inputs:{right:"right"},outputs:{profile:"profile",places:"places",available:"available"},decls:24,vars:4,consts:[[1,"chat-content-body","ps","chat-content","no-left",3,"perfectScrollbar"],["chatcontentbody",""],["id","message_box",1,"chat-group"],[4,"ngIf"],[1,"chat-content-footer",3,"formGroup"],["type","text","formControlName","message","placeholder","\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435","autocomplete","off",1,"form-control","align-self-center","bd-0"],["ngbTooltip","\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435",3,"click"],["name","send",1,"featherIcon"],[1,"pos-relative"],[1,"attach-dropdown-icon-container",3,"click"],[1,"fa","fa-paperclip"],[1,"d-flex","align-items-center","attach-dropdown-elements-container"],["ngbTooltip","\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",3,"click"],["name","image",1,"featherIcon"],["ngbTooltip","\u041f\u0440\u0438\u043a\u0440\u0435\u043f\u0438\u0442\u044c \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u044e",3,"click"],["name","camera",1,"featherIcon"],["accept","image/*","type","file",1,"d-none",3,"change"],["FileSelectInputDialog",""],["existing_image",""],["image_from_cam",""],[4,"ngFor","ngForOf"],["class","chat-group-divider",4,"ngIf"],[3,"right","msg"],[1,"chat-group-divider"],["role","status",1,"spinner-border"],[1,"media","author"],[1,"media-body"],[1,"msg-wrapper"],["type","warning",3,"value"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"py-3"],["format","jpeg","resizeToWidth","1024",3,"imageChangedEvent","onlyScaleDown","maintainAspectRatio","imageCropped"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[3,"trigger","allowCameraSwitch","imageCapture"]],template:function(t,e){1&t&&(n.Tb(0,"div",0,1),n.Tb(2,"div",2),n.Jc(3,m,3,2,"ng-container",3),n.Jc(4,v,7,1,"ng-container",3),n.Sb(),n.Sb(),n.Tb(5,"form",4),n.Ob(6,"input",5),n.Tb(7,"nav"),n.Tb(8,"a",6),n.fc("click",(function(t){return e.send(t)})),n.Ob(9,"i-feather",7),n.Sb(),n.Sb(),n.Tb(10,"nav",8),n.Tb(11,"div",9),n.fc("click",(function(){return e.hideDropdown(!0)})),n.Ob(12,"i",10),n.Sb(),n.Tb(13,"div",11),n.Tb(14,"a",12),n.fc("click",(function(){return e.openImageDialog()})),n.Ob(15,"i-feather",13),n.Sb(),n.Tb(16,"a",14),n.fc("click",(function(){return e.takeImageDialog()})),n.Ob(17,"i-feather",15),n.Sb(),n.Sb(),n.Sb(),n.Tb(18,"input",16,17),n.fc("change",(function(t){return e.fileChangeEvent(t)})),n.Sb(),n.Sb(),n.Jc(20,w,11,3,"ng-template",null,18,n.Kc),n.Jc(22,S,4,2,"ng-template",null,19,n.Kc)),2&t&&(n.pc("perfectScrollbar",e.config),n.zb(3),n.pc("ngIf",e.chat.activeChat&&e.chat.activeChat.msg&&e.chat.activeChat.msg.length>0),n.zb(1),n.pc("ngIf",e.newImage),n.zb(1),n.pc("formGroup",e.form))},styles:[""]}),t})()},Kdsb:function(t,e,i){"use strict";i.d(e,"a",(function(){return ht})),i.d(e,"b",(function(){return gt})),i.d(e,"c",(function(){return ft})),i.d(e,"d",(function(){return mt}));var n=i("XNiG"),r=i("xgIS"),s=i("VRyK"),o=i("3UWI"),a=i("1G5W"),c=i("/uUt"),l=i("7o/Q");function h(t){return e=>e.lift(new b(t))}class b{constructor(t){this.value=t}call(t,e){return e.subscribe(new p(t,this.value))}}class p extends l.a{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}var d=i("fXoL"),u=i("ofXK");function f(t){return getComputedStyle(t)}function g(t,e){for(var i in e){var n=e[i];"number"==typeof n&&(n+="px"),t.style[i]=n}return t}function m(t){var e=document.createElement("div");return e.className=t,e}var v="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function w(t,e){if(!v)throw new Error("No element matching method supported");return v.call(t,e)}function S(t){t.remove?t.remove():t.parentNode&&t.parentNode.removeChild(t)}function y(t,e){return Array.prototype.filter.call(t.children,(function(t){return w(t,e)}))}var T=function(t){return"ps__thumb-"+t},_=function(t){return"ps__rail-"+t},k=function(t){return"ps--active-"+t},x=function(t){return"ps--scrolling-"+t},O={x:null,y:null};function R(t,e){var i=t.element.classList,n=x(e);i.contains(n)?clearTimeout(O[e]):i.add(n)}function E(t,e){O[e]=setTimeout((function(){return t.isAlive&&t.element.classList.remove(x(e))}),t.settings.scrollingThreshold)}var L=function(t){this.element=t,this.handlers={}},I={isEmpty:{configurable:!0}};L.prototype.bind=function(t,e){void 0===this.handlers[t]&&(this.handlers[t]=[]),this.handlers[t].push(e),this.element.addEventListener(t,e,!1)},L.prototype.unbind=function(t,e){var i=this;this.handlers[t]=this.handlers[t].filter((function(n){return!(!e||n===e)||(i.element.removeEventListener(t,n,!1),!1)}))},L.prototype.unbindAll=function(){for(var t in this.handlers)this.unbind(t)},I.isEmpty.get=function(){var t=this;return Object.keys(this.handlers).every((function(e){return 0===t.handlers[e].length}))},Object.defineProperties(L.prototype,I);var C=function(){this.eventElements=[]};function A(t){if("function"==typeof window.CustomEvent)return new CustomEvent(t);var e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,void 0),e}function D(t,e,i,n,r){var s;if(void 0===n&&(n=!0),void 0===r&&(r=!1),"top"===e)s=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==e)throw new Error("A proper axis should be provided");s=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(t,e,i,n,r){var s=i[0],o=i[1],a=i[2],c=i[3],l=i[4],h=i[5];void 0===n&&(n=!0),void 0===r&&(r=!1);var b=t.element;t.reach[c]=null,b[a]<1&&(t.reach[c]="start"),b[a]>t[s]-t[o]-1&&(t.reach[c]="end"),e&&(b.dispatchEvent(A("ps-scroll-"+c)),e<0?b.dispatchEvent(A("ps-scroll-"+l)):e>0&&b.dispatchEvent(A("ps-scroll-"+h)),n&&function(t,e){R(t,e),E(t,e)}(t,c)),t.reach[c]&&(e||r)&&b.dispatchEvent(A("ps-"+c+"-reach-"+t.reach[c]))}(t,i,s,n,r)}function P(t){return parseInt(t,10)||0}C.prototype.eventElement=function(t){var e=this.eventElements.filter((function(e){return e.element===t}))[0];return e||(e=new L(t),this.eventElements.push(e)),e},C.prototype.bind=function(t,e,i){this.eventElement(t).bind(e,i)},C.prototype.unbind=function(t,e,i){var n=this.eventElement(t);n.unbind(e,i),n.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(n),1)},C.prototype.unbindAll=function(){this.eventElements.forEach((function(t){return t.unbindAll()})),this.eventElements=[]},C.prototype.once=function(t,e,i){var n=this.eventElement(t),r=function(t){n.unbind(e,r),i(t)};n.bind(e,r)};var Y={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)};function X(t){var e=t.element,i=Math.floor(e.scrollTop),n=e.getBoundingClientRect();t.containerWidth=Math.ceil(n.width),t.containerHeight=Math.ceil(n.height),t.contentWidth=e.scrollWidth,t.contentHeight=e.scrollHeight,e.contains(t.scrollbarXRail)||(y(e,_("x")).forEach((function(t){return S(t)})),e.appendChild(t.scrollbarXRail)),e.contains(t.scrollbarYRail)||(y(e,_("y")).forEach((function(t){return S(t)})),e.appendChild(t.scrollbarYRail)),!t.settings.suppressScrollX&&t.containerWidth+t.settings.scrollXMarginOffset<t.contentWidth?(t.scrollbarXActive=!0,t.railXWidth=t.containerWidth-t.railXMarginWidth,t.railXRatio=t.containerWidth/t.railXWidth,t.scrollbarXWidth=M(t,P(t.railXWidth*t.containerWidth/t.contentWidth)),t.scrollbarXLeft=P((t.negativeScrollAdjustment+e.scrollLeft)*(t.railXWidth-t.scrollbarXWidth)/(t.contentWidth-t.containerWidth))):t.scrollbarXActive=!1,!t.settings.suppressScrollY&&t.containerHeight+t.settings.scrollYMarginOffset<t.contentHeight?(t.scrollbarYActive=!0,t.railYHeight=t.containerHeight-t.railYMarginHeight,t.railYRatio=t.containerHeight/t.railYHeight,t.scrollbarYHeight=M(t,P(t.railYHeight*t.containerHeight/t.contentHeight)),t.scrollbarYTop=P(i*(t.railYHeight-t.scrollbarYHeight)/(t.contentHeight-t.containerHeight))):t.scrollbarYActive=!1,t.scrollbarXLeft>=t.railXWidth-t.scrollbarXWidth&&(t.scrollbarXLeft=t.railXWidth-t.scrollbarXWidth),t.scrollbarYTop>=t.railYHeight-t.scrollbarYHeight&&(t.scrollbarYTop=t.railYHeight-t.scrollbarYHeight),function(t,e){var i={width:e.railXWidth},n=Math.floor(t.scrollTop);i.left=e.isRtl?e.negativeScrollAdjustment+t.scrollLeft+e.containerWidth-e.contentWidth:t.scrollLeft,e.isScrollbarXUsingBottom?i.bottom=e.scrollbarXBottom-n:i.top=e.scrollbarXTop+n,g(e.scrollbarXRail,i);var r={top:n,height:e.railYHeight};e.isScrollbarYUsingRight?r.right=e.isRtl?e.contentWidth-(e.negativeScrollAdjustment+t.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth-9:e.scrollbarYRight-t.scrollLeft:r.left=e.isRtl?e.negativeScrollAdjustment+t.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:e.scrollbarYLeft+t.scrollLeft,g(e.scrollbarYRail,r),g(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),g(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(e,t),t.scrollbarXActive?e.classList.add(k("x")):(e.classList.remove(k("x")),t.scrollbarXWidth=0,t.scrollbarXLeft=0,e.scrollLeft=!0===t.isRtl?t.contentWidth:0),t.scrollbarYActive?e.classList.add(k("y")):(e.classList.remove(k("y")),t.scrollbarYHeight=0,t.scrollbarYTop=0,e.scrollTop=0)}function M(t,e){return t.settings.minScrollbarLength&&(e=Math.max(e,t.settings.minScrollbarLength)),t.settings.maxScrollbarLength&&(e=Math.min(e,t.settings.maxScrollbarLength)),e}function z(t,e){var i=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],c=e[6],l=e[7],h=e[8],b=t.element,p=null,d=null,u=null;function f(e){e.touches&&e.touches[0]&&(e[r]=e.touches[0].pageY),b[c]=p+u*(e[r]-d),R(t,l),X(t),e.stopPropagation(),e.preventDefault()}function g(){E(t,l),t[h].classList.remove("ps--clicking"),t.event.unbind(t.ownerDocument,"mousemove",f)}function m(e,o){p=b[c],o&&e.touches&&(e[r]=e.touches[0].pageY),d=e[r],u=(t[n]-t[i])/(t[s]-t[a]),o?t.event.bind(t.ownerDocument,"touchmove",f):(t.event.bind(t.ownerDocument,"mousemove",f),t.event.once(t.ownerDocument,"mouseup",g),e.preventDefault()),t[h].classList.add("ps--clicking"),e.stopPropagation()}t.event.bind(t[o],"mousedown",(function(t){m(t)})),t.event.bind(t[o],"touchstart",(function(t){m(t,!0)}))}var j={"click-rail":function(t){t.event.bind(t.scrollbarY,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarYRail,"mousedown",(function(e){var i=e.pageY-window.pageYOffset-t.scrollbarYRail.getBoundingClientRect().top;t.element.scrollTop+=(i>t.scrollbarYTop?1:-1)*t.containerHeight,X(t),e.stopPropagation()})),t.event.bind(t.scrollbarX,"mousedown",(function(t){return t.stopPropagation()})),t.event.bind(t.scrollbarXRail,"mousedown",(function(e){var i=e.pageX-window.pageXOffset-t.scrollbarXRail.getBoundingClientRect().left;t.element.scrollLeft+=(i>t.scrollbarXLeft?1:-1)*t.containerWidth,X(t),e.stopPropagation()}))},"drag-thumb":function(t){z(t,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),z(t,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])},keyboard:function(t){var e=t.element;t.event.bind(t.ownerDocument,"keydown",(function(i){if(!(i.isDefaultPrevented&&i.isDefaultPrevented()||i.defaultPrevented)&&(w(e,":hover")||w(t.scrollbarX,":focus")||w(t.scrollbarY,":focus"))){var n,r=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(r){if("IFRAME"===r.tagName)r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(w(n=r,"input,[contenteditable]")||w(n,"select,[contenteditable]")||w(n,"textarea,[contenteditable]")||w(n,"button,[contenteditable]"))return}var s=0,o=0;switch(i.which){case 37:s=i.metaKey?-t.contentWidth:i.altKey?-t.containerWidth:-30;break;case 38:o=i.metaKey?t.contentHeight:i.altKey?t.containerHeight:30;break;case 39:s=i.metaKey?t.contentWidth:i.altKey?t.containerWidth:30;break;case 40:o=i.metaKey?-t.contentHeight:i.altKey?-t.containerHeight:-30;break;case 32:o=i.shiftKey?t.containerHeight:-t.containerHeight;break;case 33:o=t.containerHeight;break;case 34:o=-t.containerHeight;break;case 36:o=t.contentHeight;break;case 35:o=-t.contentHeight;break;default:return}t.settings.suppressScrollX&&0!==s||t.settings.suppressScrollY&&0!==o||(e.scrollTop-=o,e.scrollLeft+=s,X(t),function(i,n){var r=Math.floor(e.scrollTop);if(0===i){if(!t.scrollbarYActive)return!1;if(0===r&&n>0||r>=t.contentHeight-t.containerHeight&&n<0)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===n){if(!t.scrollbarXActive)return!1;if(0===s&&i<0||s>=t.contentWidth-t.containerWidth&&i>0)return!t.settings.wheelPropagation}return!0}(s,o)&&i.preventDefault())}}))},wheel:function(t){var e=t.element;function i(i){var n=function(t){var e=t.deltaX,i=-1*t.deltaY;return void 0!==e&&void 0!==i||(e=-1*t.wheelDeltaX/6,i=t.wheelDeltaY/6),t.deltaMode&&1===t.deltaMode&&(e*=10,i*=10),e!=e&&i!=i&&(e=0,i=t.wheelDelta),t.shiftKey?[-i,-e]:[e,i]}(i),r=n[0],s=n[1];if(!function(t,i,n){if(!Y.isWebKit&&e.querySelector("select:focus"))return!0;if(!e.contains(t))return!1;for(var r=t;r&&r!==e;){if(r.classList.contains("ps__child--consume"))return!0;var s=f(r);if(n&&s.overflowY.match(/(scroll|auto)/)){var o=r.scrollHeight-r.clientHeight;if(o>0&&(r.scrollTop>0&&n<0||r.scrollTop<o&&n>0))return!0}if(i&&s.overflowX.match(/(scroll|auto)/)){var a=r.scrollWidth-r.clientWidth;if(a>0&&(r.scrollLeft>0&&i<0||r.scrollLeft<a&&i>0))return!0}r=r.parentNode}return!1}(i.target,r,s)){var o=!1;t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(s?e.scrollTop-=s*t.settings.wheelSpeed:e.scrollTop+=r*t.settings.wheelSpeed,o=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(r?e.scrollLeft+=r*t.settings.wheelSpeed:e.scrollLeft-=s*t.settings.wheelSpeed,o=!0):(e.scrollTop-=s*t.settings.wheelSpeed,e.scrollLeft+=r*t.settings.wheelSpeed),X(t),(o=o||function(i,n){var r=Math.floor(e.scrollTop),s=0===e.scrollTop,o=r+e.offsetHeight===e.scrollHeight,a=0===e.scrollLeft,c=e.scrollLeft+e.offsetWidth===e.scrollWidth;return!(Math.abs(n)>Math.abs(i)?s||o:a||c)||!t.settings.wheelPropagation}(r,s))&&!i.ctrlKey&&(i.stopPropagation(),i.preventDefault())}}void 0!==window.onwheel?t.event.bind(e,"wheel",i):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",i)},touch:function(t){if(Y.supportsTouch||Y.supportsIePointer){var e=t.element,i={},n=0,r={},s=null;Y.supportsTouch?(t.event.bind(e,"touchstart",l),t.event.bind(e,"touchmove",h),t.event.bind(e,"touchend",b)):Y.supportsIePointer&&(window.PointerEvent?(t.event.bind(e,"pointerdown",l),t.event.bind(e,"pointermove",h),t.event.bind(e,"pointerup",b)):window.MSPointerEvent&&(t.event.bind(e,"MSPointerDown",l),t.event.bind(e,"MSPointerMove",h),t.event.bind(e,"MSPointerUp",b)))}function o(i,n){e.scrollTop-=n,e.scrollLeft-=i,X(t)}function a(t){return t.targetTouches?t.targetTouches[0]:t}function c(t){return!(t.pointerType&&"pen"===t.pointerType&&0===t.buttons||(!t.targetTouches||1!==t.targetTouches.length)&&(!t.pointerType||"mouse"===t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE))}function l(t){if(c(t)){var e=a(t);i.pageX=e.pageX,i.pageY=e.pageY,n=(new Date).getTime(),null!==s&&clearInterval(s)}}function h(s){if(c(s)){var l=a(s),h={pageX:l.pageX,pageY:l.pageY},b=h.pageX-i.pageX,p=h.pageY-i.pageY;if(function(t,i,n){if(!e.contains(t))return!1;for(var r=t;r&&r!==e;){if(r.classList.contains("ps__child--consume"))return!0;var s=f(r);if(n&&s.overflowY.match(/(scroll|auto)/)){var o=r.scrollHeight-r.clientHeight;if(o>0&&(r.scrollTop>0&&n<0||r.scrollTop<o&&n>0))return!0}if(i&&s.overflowX.match(/(scroll|auto)/)){var a=r.scrollWidth-r.clientWidth;if(a>0&&(r.scrollLeft>0&&i<0||r.scrollLeft<a&&i>0))return!0}r=r.parentNode}return!1}(s.target,b,p))return;o(b,p),i=h;var d=(new Date).getTime(),u=d-n;u>0&&(r.x=b/u,r.y=p/u,n=d),function(i,n){var r=Math.floor(e.scrollTop),s=e.scrollLeft,o=Math.abs(i),a=Math.abs(n);if(a>o){if(n<0&&r===t.contentHeight-t.containerHeight||n>0&&0===r)return 0===window.scrollY&&n>0&&Y.isChrome}else if(o>a&&(i<0&&s===t.contentWidth-t.containerWidth||i>0&&0===s))return!0;return!0}(b,p)&&s.preventDefault()}}function b(){t.settings.swipeEasing&&(clearInterval(s),s=setInterval((function(){t.isInitialized?clearInterval(s):r.x||r.y?Math.abs(r.x)<.01&&Math.abs(r.y)<.01?clearInterval(s):(o(30*r.x,30*r.y),r.x*=.8,r.y*=.8):clearInterval(s)}),10))}}},W=function(t,e){var i=this;if(void 0===e&&(e={}),"string"==typeof t&&(t=document.querySelector(t)),!t||!t.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var n in this.element=t,t.classList.add("ps"),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1},e)this.settings[n]=e[n];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var r,s,o=function(){return t.classList.add("ps--focus")},a=function(){return t.classList.remove("ps--focus")};this.isRtl="rtl"===f(t).direction,!0===this.isRtl&&t.classList.add("ps__rtl"),this.isNegativeScroll=(s=t.scrollLeft,t.scrollLeft=-1,r=t.scrollLeft<0,t.scrollLeft=s,r),this.negativeScrollAdjustment=this.isNegativeScroll?t.scrollWidth-t.clientWidth:0,this.event=new C,this.ownerDocument=t.ownerDocument||document,this.scrollbarXRail=m(_("x")),t.appendChild(this.scrollbarXRail),this.scrollbarX=m(T("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",o),this.event.bind(this.scrollbarX,"blur",a),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var c=f(this.scrollbarXRail);this.scrollbarXBottom=parseInt(c.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=P(c.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=P(c.borderLeftWidth)+P(c.borderRightWidth),g(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=P(c.marginLeft)+P(c.marginRight),g(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=m(_("y")),t.appendChild(this.scrollbarYRail),this.scrollbarY=m(T("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",o),this.event.bind(this.scrollbarY,"blur",a),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var l=f(this.scrollbarYRail);this.scrollbarYRight=parseInt(l.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=P(l.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(t){var e=f(t);return P(e.width)+P(e.paddingLeft)+P(e.paddingRight)+P(e.borderLeftWidth)+P(e.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=P(l.borderTopWidth)+P(l.borderBottomWidth),g(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=P(l.marginTop)+P(l.marginBottom),g(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:t.scrollLeft<=0?"start":t.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:t.scrollTop<=0?"start":t.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach((function(t){return j[t](i)})),this.lastScrollTop=Math.floor(t.scrollTop),this.lastScrollLeft=t.scrollLeft,this.event.bind(this.element,"scroll",(function(t){return i.onScroll(t)})),X(this)};W.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,g(this.scrollbarXRail,{display:"block"}),g(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=P(f(this.scrollbarXRail).marginLeft)+P(f(this.scrollbarXRail).marginRight),this.railYMarginHeight=P(f(this.scrollbarYRail).marginTop)+P(f(this.scrollbarYRail).marginBottom),g(this.scrollbarXRail,{display:"none"}),g(this.scrollbarYRail,{display:"none"}),X(this),D(this,"top",0,!1,!0),D(this,"left",0,!1,!0),g(this.scrollbarXRail,{display:""}),g(this.scrollbarYRail,{display:""}))},W.prototype.onScroll=function(t){this.isAlive&&(X(this),D(this,"top",this.element.scrollTop-this.lastScrollTop),D(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)},W.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),S(this.scrollbarX),S(this.scrollbarY),S(this.scrollbarXRail),S(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},W.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter((function(t){return!t.match(/^ps([-_].+|)$/)})).join(" ")};var H=W,N=function(){if("undefined"!=typeof Map)return Map;function t(t,e){var i=-1;return t.some((function(t,n){return t[0]===e&&(i=n,!0)})),i}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var i=t(this.__entries__,e),n=this.__entries__[i];return n&&n[1]},e.prototype.set=function(e,i){var n=t(this.__entries__,e);~n?this.__entries__[n][1]=i:this.__entries__.push([e,i])},e.prototype.delete=function(e){var i=this.__entries__,n=t(i,e);~n&&i.splice(n,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var i=0,n=this.__entries__;i<n.length;i++){var r=n[i];t.call(e,r[1],r[0])}},e}()}(),V="undefined"!=typeof window&&"undefined"!=typeof document&&window.document===document,B="undefined"!=typeof global&&global.Math===Math?global:"undefined"!=typeof self&&self.Math===Math?self:"undefined"!=typeof window&&window.Math===Math?window:Function("return this")(),F="function"==typeof requestAnimationFrame?requestAnimationFrame.bind(B):function(t){return setTimeout((function(){return t(Date.now())}),1e3/60)},J=["top","right","bottom","left","width","height","size","weight"],Q="undefined"!=typeof MutationObserver,U=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(t,e){var i=!1,n=!1,r=0;function s(){i&&(i=!1,t()),n&&a()}function o(){F(s)}function a(){var t=Date.now();if(i){if(t-r<2)return;n=!0}else i=!0,n=!1,setTimeout(o,20);r=t}return a}(this.refresh.bind(this))}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,i=e.indexOf(t);~i&&e.splice(i,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter((function(t){return t.gatherActive(),t.hasActive()}));return t.forEach((function(t){return t.broadcastActive()})),t.length>0},t.prototype.connect_=function(){V&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Q?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){V&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,i=void 0===e?"":e;J.some((function(t){return!!~i.indexOf(t)}))&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),q=function(t,e){for(var i=0,n=Object.keys(e);i<n.length;i++){var r=n[i];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},G=function(t){return t&&t.ownerDocument&&t.ownerDocument.defaultView||B},K=et(0,0,0,0);function $(t){return parseFloat(t)||0}function Z(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return e.reduce((function(e,i){return e+$(t["border-"+i+"-width"])}),0)}var tt="undefined"!=typeof SVGGraphicsElement?function(t){return t instanceof G(t).SVGGraphicsElement}:function(t){return t instanceof G(t).SVGElement&&"function"==typeof t.getBBox};function et(t,e,i,n){return{x:t,y:e,width:i,height:n}}var it=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=et(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t,e=(t=this.target,V?tt(t)?function(t){var e=t.getBBox();return et(0,0,e.width,e.height)}(t):function(t){var e=t.clientWidth,i=t.clientHeight;if(!e&&!i)return K;var n=G(t).getComputedStyle(t),r=function(t){for(var e={},i=0,n=["top","right","bottom","left"];i<n.length;i++){var r=n[i];e[r]=$(t["padding-"+r])}return e}(n),s=r.left+r.right,o=r.top+r.bottom,a=$(n.width),c=$(n.height);if("border-box"===n.boxSizing&&(Math.round(a+s)!==e&&(a-=Z(n,"left","right")+s),Math.round(c+o)!==i&&(c-=Z(n,"top","bottom")+o)),!function(t){return t===G(t).document.documentElement}(t)){var l=Math.round(a+s)-e,h=Math.round(c+o)-i;1!==Math.abs(l)&&(a-=l),1!==Math.abs(h)&&(c-=h)}return et(r.left,r.top,a,c)}(t):K);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),nt=function(t,e){var i,n,r,s,o,a,c,l=(n=(i=e).x,r=i.y,s=i.width,o=i.height,a="undefined"!=typeof DOMRectReadOnly?DOMRectReadOnly:Object,c=Object.create(a.prototype),q(c,{x:n,y:r,width:s,height:o,top:r,right:n+s,bottom:o+r,left:n}),c);q(this,{target:t,contentRect:l})},rt=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new N,"function"!=typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof G(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new it(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!=typeof Element&&Element instanceof Object){if(!(t instanceof G(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach((function(e){e.isActive()&&t.activeObservations_.push(e)}))},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map((function(t){return new nt(t.target,t.broadcastRect())}));this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),st="undefined"!=typeof WeakMap?new WeakMap:new N,ot=function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var i=U.getInstance(),n=new rt(e,i,this);st.set(this,n)};["observe","unobserve","disconnect"].forEach((function(t){ot.prototype[t]=function(){var e;return(e=st.get(this))[t].apply(e,arguments)}}));var at=void 0!==B.ResizeObserver?B.ResizeObserver:ot;function ct(t,e){if(1&t&&(d.Tb(0,"div",3),d.Ob(1,"div",4),d.Ob(2,"div",5),d.Ob(3,"div",6),d.Ob(4,"div",7),d.Sb()),2&t){const t=d.jc();d.Eb("ps-at-top",t.states.top)("ps-at-left",t.states.left)("ps-at-right",t.states.right)("ps-at-bottom",t.states.bottom),d.zb(1),d.Eb("ps-indicator-show",t.indicatorY&&t.interaction),d.zb(1),d.Eb("ps-indicator-show",t.indicatorX&&t.interaction),d.zb(1),d.Eb("ps-indicator-show",t.indicatorX&&t.interaction),d.zb(1),d.Eb("ps-indicator-show",t.indicatorY&&t.interaction)}}const lt=["*"],ht=new d.q("PERFECT_SCROLLBAR_CONFIG");class bt{constructor(t,e,i,n){this.x=t,this.y=e,this.w=i,this.h=n}}class pt{constructor(t,e){this.x=t,this.y=e}}const dt=["psScrollY","psScrollX","psScrollUp","psScrollDown","psScrollLeft","psScrollRight","psYReachEnd","psYReachStart","psXReachEnd","psXReachStart"];class ut{constructor(t={}){this.assign(t)}assign(t={}){for(const e in t)this[e]=t[e]}}let ft=(()=>{let t=class{constructor(t,e,i,r,s){this.zone=t,this.differs=e,this.elementRef=i,this.platformId=r,this.defaults=s,this.instance=null,this.ro=null,this.timeout=null,this.animation=null,this.configDiff=null,this.ngDestroy=new n.a,this.disabled=!1,this.psScrollY=new d.n,this.psScrollX=new d.n,this.psScrollUp=new d.n,this.psScrollDown=new d.n,this.psScrollLeft=new d.n,this.psScrollRight=new d.n,this.psYReachEnd=new d.n,this.psYReachStart=new d.n,this.psXReachEnd=new d.n,this.psXReachStart=new d.n}ngOnInit(){if(!this.disabled&&Object(u.O)(this.platformId)){const t=new ut(this.defaults);t.assign(this.config),this.zone.runOutsideAngular(()=>{this.instance=new H(this.elementRef.nativeElement,t)}),this.configDiff||(this.configDiff=this.differs.find(this.config||{}).create(),this.configDiff.diff(this.config||{})),this.zone.runOutsideAngular(()=>{this.ro=new at(()=>{this.update()}),this.elementRef.nativeElement.children[0]&&this.ro.observe(this.elementRef.nativeElement.children[0]),this.ro.observe(this.elementRef.nativeElement)}),this.zone.runOutsideAngular(()=>{dt.forEach(t=>{const e=t.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`);Object(r.a)(this.elementRef.nativeElement,e).pipe(Object(o.a)(20),Object(a.a)(this.ngDestroy)).subscribe(e=>{this[t].emit(e)})})})}}ngOnDestroy(){Object(u.O)(this.platformId)&&(this.ngDestroy.next(),this.ngDestroy.complete(),this.ro&&this.ro.disconnect(),this.timeout&&"undefined"!=typeof window&&window.clearTimeout(this.timeout),this.zone.runOutsideAngular(()=>{this.instance&&this.instance.destroy()}),this.instance=null)}ngDoCheck(){!this.disabled&&this.configDiff&&Object(u.O)(this.platformId)&&this.configDiff.diff(this.config||{})&&(this.ngOnDestroy(),this.ngOnInit())}ngOnChanges(t){t.disabled&&!t.disabled.isFirstChange()&&Object(u.O)(this.platformId)&&t.disabled.currentValue!==t.disabled.previousValue&&(!0===t.disabled.currentValue?this.ngOnDestroy():!1===t.disabled.currentValue&&this.ngOnInit())}ps(){return this.instance}update(){"undefined"!=typeof window&&(this.timeout&&window.clearTimeout(this.timeout),this.timeout=window.setTimeout(()=>{if(!this.disabled&&this.configDiff)try{this.zone.runOutsideAngular(()=>{this.instance&&this.instance.update()})}catch(t){}},0))}geometry(t="scroll"){return new bt(this.elementRef.nativeElement[t+"Left"],this.elementRef.nativeElement[t+"Top"],this.elementRef.nativeElement[t+"Width"],this.elementRef.nativeElement[t+"Height"])}position(t=!1){return!t&&this.instance?new pt(this.instance.reach.x||0,this.instance.reach.y||0):new pt(this.elementRef.nativeElement.scrollLeft,this.elementRef.nativeElement.scrollTop)}scrollable(t="any"){const e=this.elementRef.nativeElement;return"any"===t?e.classList.contains("ps--active-x")||e.classList.contains("ps--active-y"):"both"===t?e.classList.contains("ps--active-x")&&e.classList.contains("ps--active-y"):e.classList.contains("ps--active-"+t)}scrollTo(t,e,i){this.disabled||(null==e&&null==i?this.animateScrolling("scrollTop",t,i):(null!=t&&this.animateScrolling("scrollLeft",t,i),null!=e&&this.animateScrolling("scrollTop",e,i)))}scrollToX(t,e){this.animateScrolling("scrollLeft",t,e)}scrollToY(t,e){this.animateScrolling("scrollTop",t,e)}scrollToTop(t,e){this.animateScrolling("scrollTop",t||0,e)}scrollToLeft(t,e){this.animateScrolling("scrollLeft",t||0,e)}scrollToRight(t,e){this.animateScrolling("scrollLeft",this.elementRef.nativeElement.scrollWidth-this.elementRef.nativeElement.clientWidth-(t||0),e)}scrollToBottom(t,e){this.animateScrolling("scrollTop",this.elementRef.nativeElement.scrollHeight-this.elementRef.nativeElement.clientHeight-(t||0),e)}scrollToElement(t,e,i){const n=this.elementRef.nativeElement.querySelector(t);if(n){const t=n.getBoundingClientRect(),r=this.elementRef.nativeElement.getBoundingClientRect();this.elementRef.nativeElement.classList.contains("ps--active-x")&&this.animateScrolling("scrollLeft",t.left-r.left+this.elementRef.nativeElement.scrollLeft+(e||0),i),this.elementRef.nativeElement.classList.contains("ps--active-y")&&this.animateScrolling("scrollTop",t.top-r.top+this.elementRef.nativeElement.scrollTop+(e||0),i)}}animateScrolling(t,e,i){if(this.animation&&(window.cancelAnimationFrame(this.animation),this.animation=null),i&&"undefined"!=typeof window){if(e!==this.elementRef.nativeElement[t]){let n=0,r=0,s=performance.now(),o=this.elementRef.nativeElement[t];const a=(o-e)/2,c=l=>{r+=Math.PI/(i/(l-s)),n=Math.round(e+a+a*Math.cos(r)),this.elementRef.nativeElement[t]===o&&(r>=Math.PI?this.animateScrolling(t,e,0):(this.elementRef.nativeElement[t]=n,o=this.elementRef.nativeElement[t],s=l,this.animation=window.requestAnimationFrame(c)))};window.requestAnimationFrame(c)}}else this.elementRef.nativeElement[t]=e}};return t.\u0275fac=function(e){return new(e||t)(d.Nb(d.z),d.Nb(d.t),d.Nb(d.l),d.Nb(d.B),d.Nb(ht,8))},t.\u0275dir=d.Ib({type:t,selectors:[["","perfectScrollbar",""]],inputs:{disabled:"disabled",config:["perfectScrollbar","config"]},outputs:{psScrollY:"psScrollY",psScrollX:"psScrollX",psScrollUp:"psScrollUp",psScrollDown:"psScrollDown",psScrollLeft:"psScrollLeft",psScrollRight:"psScrollRight",psYReachEnd:"psYReachEnd",psYReachStart:"psYReachStart",psXReachEnd:"psXReachEnd",psXReachStart:"psXReachStart"},exportAs:["ngxPerfectScrollbar"],features:[d.xb]}),t})(),gt=(()=>{let t=class{constructor(t,e,i){this.zone=t,this.cdRef=e,this.platformId=i,this.states={},this.indicatorX=!1,this.indicatorY=!1,this.interaction=!1,this.scrollPositionX=0,this.scrollPositionY=0,this.scrollDirectionX=0,this.scrollDirectionY=0,this.usePropagationX=!1,this.usePropagationY=!1,this.allowPropagationX=!1,this.allowPropagationY=!1,this.stateTimeout=null,this.ngDestroy=new n.a,this.stateUpdate=new n.a,this.disabled=!1,this.usePSClass=!0,this.autoPropagation=!1,this.scrollIndicators=!1,this.psScrollY=new d.n,this.psScrollX=new d.n,this.psScrollUp=new d.n,this.psScrollDown=new d.n,this.psScrollLeft=new d.n,this.psScrollRight=new d.n,this.psYReachEnd=new d.n,this.psYReachStart=new d.n,this.psXReachEnd=new d.n,this.psXReachStart=new d.n}ngOnInit(){Object(u.O)(this.platformId)&&(this.stateUpdate.pipe(Object(a.a)(this.ngDestroy),Object(c.a)((t,e)=>t===e&&!this.stateTimeout)).subscribe(t=>{this.stateTimeout&&"undefined"!=typeof window&&(window.clearTimeout(this.stateTimeout),this.stateTimeout=null),"x"===t||"y"===t?(this.interaction=!1,"x"===t?(this.indicatorX=!1,this.states.left=!1,this.states.right=!1,this.autoPropagation&&this.usePropagationX&&(this.allowPropagationX=!1)):"y"===t&&(this.indicatorY=!1,this.states.top=!1,this.states.bottom=!1,this.autoPropagation&&this.usePropagationY&&(this.allowPropagationY=!1))):("left"===t||"right"===t?(this.states.left=!1,this.states.right=!1,this.states[t]=!0,this.autoPropagation&&this.usePropagationX&&(this.indicatorX=!0)):"top"!==t&&"bottom"!==t||(this.states.top=!1,this.states.bottom=!1,this.states[t]=!0,this.autoPropagation&&this.usePropagationY&&(this.indicatorY=!0)),this.autoPropagation&&"undefined"!=typeof window&&(this.stateTimeout=window.setTimeout(()=>{this.indicatorX=!1,this.indicatorY=!1,this.stateTimeout=null,this.interaction&&(this.states.left||this.states.right)&&(this.allowPropagationX=!0),this.interaction&&(this.states.top||this.states.bottom)&&(this.allowPropagationY=!0),this.cdRef.markForCheck()},500))),this.cdRef.markForCheck(),this.cdRef.detectChanges()}),this.zone.runOutsideAngular(()=>{if(this.directiveRef){const t=this.directiveRef.elementRef.nativeElement;Object(r.a)(t,"wheel").pipe(Object(a.a)(this.ngDestroy)).subscribe(t=>{!this.disabled&&this.autoPropagation&&this.checkPropagation(t,t.deltaX,t.deltaY)}),Object(r.a)(t,"touchmove").pipe(Object(a.a)(this.ngDestroy)).subscribe(t=>{if(!this.disabled&&this.autoPropagation){const e=t.touches[0].clientX,i=t.touches[0].clientY;this.checkPropagation(t,e-this.scrollPositionX,i-this.scrollPositionY),this.scrollPositionX=e,this.scrollPositionY=i}}),Object(s.a)(Object(r.a)(t,"ps-scroll-x").pipe(h("x")),Object(r.a)(t,"ps-scroll-y").pipe(h("y")),Object(r.a)(t,"ps-x-reach-end").pipe(h("right")),Object(r.a)(t,"ps-y-reach-end").pipe(h("bottom")),Object(r.a)(t,"ps-x-reach-start").pipe(h("left")),Object(r.a)(t,"ps-y-reach-start").pipe(h("top"))).pipe(Object(a.a)(this.ngDestroy)).subscribe(t=>{this.disabled||!this.autoPropagation&&!this.scrollIndicators||this.stateUpdate.next(t)})}}),window.setTimeout(()=>{dt.forEach(t=>{this.directiveRef&&(this.directiveRef[t]=this[t])})},0))}ngOnDestroy(){Object(u.O)(this.platformId)&&(this.ngDestroy.next(),this.ngDestroy.unsubscribe(),this.stateTimeout&&"undefined"!=typeof window&&window.clearTimeout(this.stateTimeout))}ngDoCheck(){if(Object(u.O)(this.platformId)&&!this.disabled&&this.autoPropagation&&this.directiveRef){const t=this.directiveRef.elementRef.nativeElement;this.usePropagationX=t.classList.contains("ps--active-x"),this.usePropagationY=t.classList.contains("ps--active-y")}}checkPropagation(t,e,i){this.interaction=!0;const n=e<0?-1:1,r=i<0?-1:1;(this.usePropagationX&&this.usePropagationY||this.usePropagationX&&(!this.allowPropagationX||this.scrollDirectionX!==n)||this.usePropagationY&&(!this.allowPropagationY||this.scrollDirectionY!==r))&&(t.preventDefault(),t.stopPropagation()),e&&(this.scrollDirectionX=n),i&&(this.scrollDirectionY=r),this.stateUpdate.next("interaction"),this.cdRef.detectChanges()}};return t.\u0275fac=function(e){return new(e||t)(d.Nb(d.z),d.Nb(d.h),d.Nb(d.B))},t.\u0275cmp=d.Hb({type:t,selectors:[["perfect-scrollbar"]],viewQuery:function(t,e){var i;1&t&&d.Hc(ft,!0),2&t&&d.xc(i=d.gc())&&(e.directiveRef=i.first)},hostVars:4,hostBindings:function(t,e){2&t&&d.Eb("ps-show-limits",e.autoPropagation)("ps-show-active",e.scrollIndicators)},inputs:{disabled:"disabled",usePSClass:"usePSClass",autoPropagation:"autoPropagation",scrollIndicators:"scrollIndicators",config:"config"},outputs:{psScrollY:"psScrollY",psScrollX:"psScrollX",psScrollUp:"psScrollUp",psScrollDown:"psScrollDown",psScrollLeft:"psScrollLeft",psScrollRight:"psScrollRight",psYReachEnd:"psYReachEnd",psYReachStart:"psYReachStart",psXReachEnd:"psXReachEnd",psXReachStart:"psXReachStart"},exportAs:["ngxPerfectScrollbar"],ngContentSelectors:lt,decls:4,vars:5,consts:[[2,"position","static",3,"perfectScrollbar","disabled"],[1,"ps-content"],["class","ps-overlay",3,"ps-at-top","ps-at-left","ps-at-right","ps-at-bottom",4,"ngIf"],[1,"ps-overlay"],[1,"ps-indicator-top"],[1,"ps-indicator-left"],[1,"ps-indicator-right"],[1,"ps-indicator-bottom"]],template:function(t,e){1&t&&(d.oc(),d.Tb(0,"div",0),d.Tb(1,"div",1),d.nc(2),d.Sb(),d.Jc(3,ct,5,16,"div",2),d.Sb()),2&t&&(d.Eb("ps",e.usePSClass),d.pc("perfectScrollbar",e.config)("disabled",e.disabled),d.zb(3),d.pc("ngIf",e.scrollIndicators))},directives:[ft,u.u],styles:["perfect-scrollbar{position:relative;display:block;overflow:hidden;width:100%;height:100%;max-width:100%;max-height:100%}perfect-scrollbar[hidden]{display:none}perfect-scrollbar[fxflex]{display:-webkit-box;display:flex;flex-direction:column;height:auto;min-width:0;min-height:0;-webkit-box-direction:column;-webkit-box-orient:column}perfect-scrollbar[fxflex]>.ps{flex:1 1 auto;width:auto;height:auto;min-width:0;min-height:0;-webkit-box-flex:1}perfect-scrollbar[fxlayout]>.ps,perfect-scrollbar[fxlayout]>.ps>.ps-content{display:-webkit-box;display:flex;flex:1 1 auto;flex-direction:inherit;align-items:inherit;align-content:inherit;justify-content:inherit;width:100%;height:100%;-webkit-box-align:inherit;-webkit-box-direction:inherit;-webkit-box-flex:1;-webkit-box-orient:inherit;-webkit-box-pack:inherit},perfect-scrollbar[fxlayout=row]>.ps,perfect-scrollbar[fxlayout=row]>.ps>.ps-content{flex-direction:row!important;-webkit-box-direction:row!important;-webkit-box-orient:row!important}perfect-scrollbar[fxlayout=column]>.ps,perfect-scrollbar[fxlayout=column]>.ps>.ps-content{flex-direction:column!important;-webkit-box-direction:column!important;-webkit-box-orient:column!important}perfect-scrollbar>.ps{position:static;display:block;width:100%;height:100%;max-width:100%;max-height:100%}perfect-scrollbar>.ps textarea{-ms-overflow-style:scrollbar}perfect-scrollbar>.ps>.ps-overlay{position:absolute;top:0;right:0;bottom:0;left:0;display:block;overflow:hidden;pointer-events:none}perfect-scrollbar>.ps>.ps-overlay .ps-indicator-bottom,perfect-scrollbar>.ps>.ps-overlay .ps-indicator-left,perfect-scrollbar>.ps>.ps-overlay .ps-indicator-right,perfect-scrollbar>.ps>.ps-overlay .ps-indicator-top{position:absolute;opacity:0;-webkit-transition:opacity .3s ease-in-out;transition:opacity .3s ease-in-out}perfect-scrollbar>.ps>.ps-overlay .ps-indicator-bottom,perfect-scrollbar>.ps>.ps-overlay .ps-indicator-top{left:0;min-width:100%;min-height:24px}perfect-scrollbar>.ps>.ps-overlay .ps-indicator-left,perfect-scrollbar>.ps>.ps-overlay .ps-indicator-right{top:0;min-width:24px;min-height:100%}perfect-scrollbar>.ps>.ps-overlay .ps-indicator-top{top:0}perfect-scrollbar>.ps>.ps-overlay .ps-indicator-left{left:0}perfect-scrollbar>.ps>.ps-overlay .ps-indicator-right{right:0}perfect-scrollbar>.ps>.ps-overlay .ps-indicator-bottom{bottom:0}perfect-scrollbar>.ps.ps--active-y>.ps__rail-y{top:0!important;right:0!important;left:auto!important;width:10px;cursor:default;-webkit-transition:width .2s linear,opacity .2s linear,background-color .2s linear;transition:width .2s linear,opacity .2s linear,background-color .2s linear}perfect-scrollbar>.ps.ps--active-y>.ps__rail-y.ps--clicking,perfect-scrollbar>.ps.ps--active-y>.ps__rail-y:hover{width:15px}perfect-scrollbar>.ps.ps--active-x>.ps__rail-x{top:auto!important;bottom:0!important;left:0!important;height:10px;cursor:default;-webkit-transition:height .2s linear,opacity .2s linear,background-color .2s linear;transition:height .2s linear,opacity .2s linear,background-color .2s linear}perfect-scrollbar>.ps.ps--active-x>.ps__rail-x.ps--clicking,perfect-scrollbar>.ps.ps--active-x>.ps__rail-x:hover{height:15px}perfect-scrollbar>.ps.ps--active-x.ps--active-y>.ps__rail-y{margin:0 0 10px}perfect-scrollbar>.ps.ps--active-x.ps--active-y>.ps__rail-x{margin:0 10px 0 0}perfect-scrollbar>.ps.ps--scrolling-x>.ps__rail-x,perfect-scrollbar>.ps.ps--scrolling-y>.ps__rail-y{opacity:.9;background-color:#eee}perfect-scrollbar.ps-show-always>.ps.ps--active-x>.ps__rail-x,perfect-scrollbar.ps-show-always>.ps.ps--active-y>.ps__rail-y{opacity:.6}perfect-scrollbar.ps-show-active>.ps.ps--active-y>.ps-overlay:not(.ps-at-top) .ps-indicator-top{opacity:1;background:-webkit-gradient(linear,left top,left bottom,from(rgba(255,255,255,.5)),to(rgba(255,255,255,0)));background:linear-gradient(to bottom,rgba(255,255,255,.5) 0,rgba(255,255,255,0) 100%)}perfect-scrollbar.ps-show-active>.ps.ps--active-y>.ps-overlay:not(.ps-at-bottom) .ps-indicator-bottom{opacity:1;background:-webkit-gradient(linear,left bottom,left top,from(rgba(255,255,255,.5)),to(rgba(255,255,255,0)));background:linear-gradient(to top,rgba(255,255,255,.5) 0,rgba(255,255,255,0) 100%)}perfect-scrollbar.ps-show-active>.ps.ps--active-x>.ps-overlay:not(.ps-at-left) .ps-indicator-left{opacity:1;background:-webkit-gradient(linear,left top,right top,from(rgba(255,255,255,.5)),to(rgba(255,255,255,0)));background:linear-gradient(to right,rgba(255,255,255,.5) 0,rgba(255,255,255,0) 100%)}perfect-scrollbar.ps-show-active>.ps.ps--active-x>.ps-overlay:not(.ps-at-right) .ps-indicator-right{opacity:1;background:-webkit-gradient(linear,right top,left top,from(rgba(255,255,255,.5)),to(rgba(255,255,255,0)));background:linear-gradient(to left,rgba(255,255,255,.5) 0,rgba(255,255,255,0) 100%)}perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-y>.ps-overlay.ps-at-top .ps-indicator-top{background:-webkit-gradient(linear,left top,left bottom,from(rgba(170,170,170,.5)),to(rgba(170,170,170,0)));background:linear-gradient(to bottom,rgba(170,170,170,.5) 0,rgba(170,170,170,0) 100%)}perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-y>.ps-overlay.ps-at-bottom .ps-indicator-bottom{background:-webkit-gradient(linear,left bottom,left top,from(rgba(170,170,170,.5)),to(rgba(170,170,170,0)));background:linear-gradient(to top,rgba(170,170,170,.5) 0,rgba(170,170,170,0) 100%)}perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-x>.ps-overlay.ps-at-left .ps-indicator-left{background:-webkit-gradient(linear,left top,right top,from(rgba(170,170,170,.5)),to(rgba(170,170,170,0)));background:linear-gradient(to right,rgba(170,170,170,.5) 0,rgba(170,170,170,0) 100%)}perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-x>.ps-overlay.ps-at-right .ps-indicator-right{background:-webkit-gradient(linear,right top,left top,from(rgba(170,170,170,.5)),to(rgba(170,170,170,0)));background:linear-gradient(to left,rgba(170,170,170,.5) 0,rgba(170,170,170,0) 100%)}perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-x>.ps-overlay.ps-at-left .ps-indicator-left.ps-indicator-show,perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-x>.ps-overlay.ps-at-right .ps-indicator-right.ps-indicator-show,perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-y>.ps-overlay.ps-at-bottom .ps-indicator-bottom.ps-indicator-show,perfect-scrollbar.ps-show-active.ps-show-limits>.ps.ps--active-y>.ps-overlay.ps-at-top .ps-indicator-top.ps-indicator-show{opacity:1}",".ps{overflow:hidden!important;overflow-anchor:none;-ms-overflow-style:none;touch-action:auto;-ms-touch-action:auto}.ps__rail-x{display:none;opacity:0;transition:background-color .2s linear,opacity .2s linear;-webkit-transition:background-color .2s linear,opacity .2s linear;height:15px;bottom:0;position:absolute}.ps__rail-y{display:none;opacity:0;transition:background-color .2s linear,opacity .2s linear;-webkit-transition:background-color .2s linear,opacity .2s linear;width:15px;right:0;position:absolute}.ps--active-x>.ps__rail-x,.ps--active-y>.ps__rail-y{display:block;background-color:transparent}.ps--focus>.ps__rail-x,.ps--focus>.ps__rail-y,.ps--scrolling-x>.ps__rail-x,.ps--scrolling-y>.ps__rail-y,.ps:hover>.ps__rail-x,.ps:hover>.ps__rail-y{opacity:.6}.ps .ps__rail-x.ps--clicking,.ps .ps__rail-x:focus,.ps .ps__rail-x:hover,.ps .ps__rail-y.ps--clicking,.ps .ps__rail-y:focus,.ps .ps__rail-y:hover{background-color:#eee;opacity:.9}.ps__thumb-x{background-color:#aaa;border-radius:6px;transition:background-color .2s linear,height .2s ease-in-out;-webkit-transition:background-color .2s linear,height .2s ease-in-out;height:6px;bottom:2px;position:absolute}.ps__thumb-y{background-color:#aaa;border-radius:6px;transition:background-color .2s linear,width .2s ease-in-out;-webkit-transition:background-color .2s linear,width .2s ease-in-out;width:6px;right:2px;position:absolute}.ps__rail-x.ps--clicking .ps__thumb-x,.ps__rail-x:focus>.ps__thumb-x,.ps__rail-x:hover>.ps__thumb-x{background-color:#999;height:11px}.ps__rail-y.ps--clicking .ps__thumb-y,.ps__rail-y:focus>.ps__thumb-y,.ps__rail-y:hover>.ps__thumb-y{background-color:#999;width:11px}@supports (-ms-overflow-style:none){.ps{overflow:auto!important}}@media screen and (-ms-high-contrast:active),(-ms-high-contrast:none){.ps{overflow:auto!important}}"],encapsulation:2}),t})(),mt=(()=>{let t=class{};return t.\u0275mod=d.Lb({type:t}),t.\u0275inj=d.Kb({factory:function(e){return new(e||t)},imports:[[u.c],u.c]}),t})()},hQyN:function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i("fXoL"),r=i("DQTw"),s=i("Kdsb"),o=i("ofXK"),a=i("tyNb");const c=function(){return["../chats"]},l=function(t,e){return{place:t,unused:e}};function h(t,e){if(1&t&&(n.Tb(0,"a",6),n.Lc(1),n.Tb(2,"div",7),n.Tb(3,"p"),n.Lc(4),n.Sb(),n.Sb(),n.Sb()),2&t){const t=e.$implicit,i=n.jc();n.Eb("active",i.chat.activePlace&&t._id==i.chat.activePlace._id)("online","online"==t.status)("offline","offline"==t.status),n.qc("title",t.name),n.pc("routerLink",n.sc(13,c))("queryParams",n.uc(14,l,t._id,i.counter)),n.zb(1),n.Nc(" ",t.name," "),n.zb(1),n.Eb("d-none",0==t.new_messages),n.zb(2),n.Mc(t.new_messages)}}let b=(()=>{class t{constructor(t){this.chat=t,this.config={}}get counter(){return(new Date).getSeconds()}ngOnInit(){this.$changes=this.chat.changes.subscribe(()=>this.update()),this.$new_message=this.chat.new_message.subscribe(()=>this.update()),this.update()}ngOnDestroy(){this.$changes&&this.$changes.unsubscribe(),this.$new_message&&this.$new_message.unsubscribe()}update(){this.places=this.chat.places}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(r.a))},t.\u0275cmp=n.Hb({type:t,selectors:[["chat-select-room"]],hostAttrs:[1,"chat-sidebar-body"],decls:7,vars:2,consts:[[1,"all-places-custom-position",3,"perfectScrollbar"],[1,"flex-fill","pd-y-20","pd-x-10"],[1,"d-flex","align-items-center","justify-content-between","pd-x-10","mg-b-10","all-places-title"],[1,"tx-10","tx-uppercase","tx-medium","tx-color-03","tx-sans","tx-spacing-1"],["id","allChannels",1,"nav","flex-column","nav-chat","mg-b-20"],["class","nav-link",3,"title","routerLink","queryParams","active","online","offline",4,"ngFor","ngForOf"],[1,"nav-link",3,"title","routerLink","queryParams"],[1,"badge","badge-danger","custom-badge-size"]],template:function(t,e){1&t&&(n.Tb(0,"div",0),n.Tb(1,"div",1),n.Tb(2,"div",2),n.Tb(3,"span",3),n.Lc(4,"\u0412\u0441\u0435 \u043c\u0435\u0441\u0442\u0430"),n.Sb(),n.Sb(),n.Tb(5,"nav",4),n.Jc(6,h,5,17,"a",5),n.Sb(),n.Sb(),n.Sb()),2&t&&(n.pc("perfectScrollbar",e.config),n.zb(6),n.pc("ngForOf",e.places))},directives:[s.c,o.t,a.e],styles:['.offline[_ngcontent-%COMP%]:before, .online[_ngcontent-%COMP%]:before{content:"";display:inline-block;width:5px;height:5px;border-radius:2.5px;background-color:#69b6d5}.online[_ngcontent-%COMP%]:before{background-color:green}.offline[_ngcontent-%COMP%]:before{background-color:#a9a9a9}']}),t})()},oEUg:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return a})),i.d(e,"b",(function(){return c}));var n=i("QNxT"),r=i("wd/R"),s=i("fXoL");let o=(()=>{class t{transform(t){return r(t).fromNow()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Mb({name:"age",type:t,pure:!0}),t})(),a=(()=>{class t{transform(t){return Object(n.e)(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Mb({name:"username",type:t,pure:!0}),t})(),c=(()=>{class t{transform(t){return Object(n.d)(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=s.Mb({name:"tablename",type:t,pure:!0}),t})()},s2oM:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("fXoL"),r=i("1kSV"),s=i("rIor");const o=["editor"],a=["FileSelectInputDialog"];function c(t,e){if(1&t){const t=n.Ub();n.Tb(0,"image-cropper",8),n.fc("imageCropped",(function(e){return n.Bc(t),n.jc().imageCropped(e)})),n.Sb(),n.Tb(1,"div",9),n.Tb(2,"button",10),n.fc("click",(function(){return e.$implicit.close("Save click")})),n.Lc(3,"Ok"),n.Sb(),n.Sb()}if(2&t){const t=n.jc();n.pc("imageChangedEvent",t.imageChangedEvent)("maintainAspectRatio",!0)("aspectRatio",1)}}let l=(()=>{class t{constructor(t){this.modalService=t,this.image="",this.imageChange=new n.n,this.imageChangedEvent=""}openAddFilesDialog(){this.FileSelectInputDialog.nativeElement.click()}fileChangeEvent(t){this.imageChangedEvent=t,this.modalService.open(this.editor,{ariaLabelledBy:"modal-basic-title"}).result.then(t=>this.imageChange.emit(this.newImage),t=>console.log(t)).then(()=>{this.FileSelectInputDialog.nativeElement.value=""})}imageCropped(t){this.newImage=t.base64}}return t.\u0275fac=function(e){return new(e||t)(n.Nb(r.q))},t.\u0275cmp=n.Hb({type:t,selectors:[["cmn-avatar-editor"]],viewQuery:function(t,e){var i;1&t&&(n.Pc(o,!0),n.Pc(a,!0)),2&t&&(n.xc(i=n.gc())&&(e.editor=i.first),n.xc(i=n.gc())&&(e.FileSelectInputDialog=i.first))},hostAttrs:[1,"avatar"],inputs:{image:"image"},outputs:{imageChange:"imageChange"},decls:10,vars:1,consts:[["editor",""],[1,"row","avatar-block"],["accept","image/*","type","file",1,"hidden",3,"change"],["FileSelectInputDialog",""],[1,"col-sm-6","cursor-pointer"],[1,"rounded-circle",3,"src","click"],[1,"col-auto"],[1,"btn","btn-info",3,"click"],["format","jpeg",3,"imageChangedEvent","maintainAspectRatio","aspectRatio","imageCropped"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(t,e){1&t&&(n.Jc(0,c,4,3,"ng-template",null,0,n.Kc),n.Tb(2,"div",1),n.Tb(3,"input",2,3),n.fc("change",(function(t){return e.fileChangeEvent(t)})),n.Sb(),n.Tb(5,"div",4),n.Tb(6,"img",5),n.fc("click",(function(){return e.openAddFilesDialog()})),n.Sb(),n.Sb(),n.Tb(7,"div",6),n.Tb(8,"button",7),n.fc("click",(function(){return e.openAddFilesDialog()})),n.Lc(9,"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),n.Sb(),n.Sb(),n.Sb()),2&t&&(n.zb(6),n.pc("src",e.image,n.Dc))},directives:[s.a],styles:[".hidden[_ngcontent-%COMP%]{display:none}img[_ngcontent-%COMP%]{max-width:120px}"]}),t})()}}]);